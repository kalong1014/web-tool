{{dispatch c=public a='leftArticle'}}<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><script type="text/javascript">var cdn_url	= "http://s1.jikexueyuan.com/current/static/";var pub_url	= "http://s1.jikexueyuan.com/current";</script><link href="http://reg.duanxin.cm/templates/css/register.css" rel="stylesheet" type="text/css" /><style>/*loading*/#loading .loading-length{width:0px;height:5px; overflow:hidden;	background:#0085ca;}</style><script type="text/javascript">  var boxNew_len = 6; //焦点图长度，现在有5帧  slidBoxNew = function() {};  $.extend(slidBoxNew, {	prototype: {	  init: function(imgIDArr, intervalTime, slidTime) {		this.imgIDArr = imgIDArr;		this.imgCount = imgIDArr.length;		this.currentImgIndex = 0;		this.intervalTime = intervalTime;		this.slidTime = slidTime;		this.sliding = true;		var pointer = this;		$.each(this.imgIDArr,		function(i, item) {		  if (i != pointer.currentImgIndex) {			$('#' + item).css('opacity', 0);			$('#' + item).css("left", '2000px');		  }		});	  },	  slidImg: function() {		if (this.imgCount < 2) return;		frontImgIndex = this.currentImgIndex;		//alert(frontImgIndex);		backImgIndex = this.currentImgIndex + 1;		if (backImgIndex >= this.imgCount) {		  $("#iconNew0" + (this.imgCount)).removeClass("current");		  backImgIndex = 0;		}		var _backImg = $('#' + this.imgIDArr[backImgIndex]);		var _frontImg = $('#' + this.imgIDArr[frontImgIndex]);		_frontImg.fadeTo(500, 0.1,		function() {		  _frontImg.css("left", '2000px');		  _backImg.css("left", "0px");		  _backImg.fadeTo(500, 1);		});		for (var i = 0; i < boxNew_len; i++) {		  $("#iconNew0" + (i + 1)).removeClass("current");		}		$("#iconNew0" + (backImgIndex + 1)).addClass("current");		this.currentImgIndex = backImgIndex;	  },	  run: function() {		this.intervalID = setInterval("slidBox2.slidImg()", this.intervalTime);		this.sliding = true;	  },	  clickSlid: function(clickIndex) {		clearInterval(this.intervalID);		this.sliding = false;		if (clickIndex < -1 || clickIndex > this.imgCount - 1) return;		frontImgIndex = this.currentImgIndex;		backImgIndex = clickIndex;		var _backImg = $('#' + this.imgIDArr[backImgIndex]);		var _frontImg = $('#' + this.imgIDArr[frontImgIndex]);		_frontImg.fadeTo(1, 0.1,		function() {		  _frontImg.css("left", '2000px');		  _backImg.css("left", "0px");		  _backImg.fadeTo(500, 1);		  for (var i = 0; i < boxNew_len; i++) {			$("#iconNew0" + (i + 1)).removeClass("current");		  }		  $("#iconNew0" + clickIndex).addClass("current");		});		this.currentImgIndex = clickIndex;		clickIndex += 1;		this.stopSlid("slidPauseNew");	  },	  stopSlid: function(pauseId) {		clearInterval(this.intervalID);		this.sliding = false;		$('#' + pauseId).removeClass('pause');		$('#' + pauseId).addClass('play');	  }	}  });  var slidBox2 = new slidBoxNew();  </script></head><body> <script> $(function (){	$(".regInput").focus(function(){		$(this).css("border","1px solid #ccc");		$(this).next().html($(this).attr("notice"));		$(this).next().show();	})	$(".regInput").blur(function(){		$(this).next().hide();		var  rex=$(this).attr("reg"); //var  reg=/^(1[3-9])\d{9}$/;		var reg = new RegExp(rex,"g");				if(!reg.test($(this).val())){			$(this).next().html($(this).attr("tip"));			$(this).next().show();			$(this).css("border","1px solid red");		}else{			$(this).css("border","1px solid #ccc");		}	})	$("#yzm").focus(function(){		$(this).css("border","1px solid #ccc");			})	$("#yzm").blur(function(){				if($(this).val()==""){						$(this).css("border","1px solid red");		}else{			$(this).css("border","1px solid #ccc");		}	})	//alert("./getUser.php?openid="+$("#getUser").attr("value")+"&key="+$("#key").val());	 }) function check(){		var stat=true;		$(".regInput").each(function(){			var  rex=$(this).attr("reg"); //var  reg=/^(1[3-9])\d{9}$/;			var reg = new RegExp(rex,"g");						if(!reg.test($(this).val())){				$(this).css("border","1px solid red");				stat=false;			}		})		$(".regInput2").each(function(){			if($(this).val()==""){				$(this).css("border","1px solid red");				stat=false;			}		})				if(stat === false){			$("#button1").css('background','none');			$("#button1").val('正在提交...');			$("#button1").css('color','#000');			alert("请完善注册信息！");			return false;		}else{			if($("#button1").val()=='正在提交...'){				return false;			}			$("#button1").css('background','none');			$("#button1").val('正在提交...');			$("#button1").css('border','1px #000 solid');			$("#button1").css('color','#000');		}			}</script>    <!--免费试用主要内容-->  <div id="register">    	<!--左边部分-->    <div id="reg_left">      <ul>       		     <li><span class="span1">{{$product.name}}</span></li><br>        <li>        <p> {{$product.describe}}</p>        </li>      </ul>      <div class="reg_ask">你也可以拨打客服电话直接申请：<span>400-163-5599</span></div>    </div>        <!--右边部分-->    <div id="reg_right">	<form method="post" action="?c=product&a=modBuy&product_id={{$product.id}}&nodename={{$nodename}}" id="uform" name="uform" onsubmit='return check(this);'>    	<ul>        	<li>用户名:												<input type="text" name="name" id="name"  class="regInput" value=""></li>						<li><input type="button" name="Submit" value="检测" class="regInput" 							onClick="check_name()"></li>                      <li>密码：<input type="password" name="passwd" id="passwd"  class="regInput"></li>						<li>确认密码:<input type="password"name="passwd2" id="passwd2"  class="regInput"></li>						 <li>域名:<input type="text" name="domain" id="domain"   class="regInput"></li>			{{if $entkey}}					<tr>				 <li>优惠折抵:<input type="text" name="ent_key" id='key' class="regInput"></li>		 				 <li>	<input type='button' value='检测' class="regInput" onclick='check_entkey()'> </li>																	{{/if}}																					<li>{{if $product.noagentprice}}特价:{{/if}}{{($product.pay_cycle=='year') ? '<h2>每年' : "每月"}}/{{$product.price}}元 									 {{if $product.noagentprice}}原价:{{($product.pay_cycle=='year') ? '每年' : "每月"}}/{{$product.noagentprice}}元{{/if}}						</li>								<li style='padding-left: 75px;'><input type='submit' value='立即购买' class="button1" id='button1' style='border:none;cursor:pointer' ><a class="button2" onclick="window.open('http://wpa.qq.com/msgrd?v=3&uin=1349443473&site=qq&menu=yes')" style='border:none;cursor:pointer'>在线咨询</a></li>              </ul>		</form>    </div>  </div>  <!--end of register-->   </div><!--end of container-->   <!--end of register-->   </div>			<script src="{{$STATIC}}style/js/jquery.validate.min.js" type="text/javascript"></script>	<script src="{{$STATIC}}style/js/validate_zh.js" type="text/javascript"></script>		<script type="text/javascript">	$(function(){		 $('#form_reg').validate();		 $('input[name="username"]').blur(function(){		 	if($(this).val().length>2){				$.get('?c=public&a=ajaxCheckUser&username=' + $(this).val(),function(msg){					$('#user_check').html(msg);				})			}		 })	})</script>																													<!--		<div class="wrap_box domain_all">		<div class="title">			<h2>购买产品11</h2>		</div>		<div class="wrap_box_info form">			<form name='reg' action="?c=product&a=modBuy&product_id={{$product.id}}&nodename={{$nodename}}" method="post">				<table>					<tr>						<td colspan="2" class="red"><b>购买产品 {{$product.name}}</b></td>					</tr>					{{if !$msg}}					<tr>						<td>用户名:</td>						<td><input name="name" id="name" class="text"> <input type="button" name="Submit" value="检测" class="submit" style="float: left"							onClick="check_name()"></td>					</tr>					<tr>						<td>密码:</td>						<td><input name="passwd" type="password" id="passwd" class="text"></td>					</tr>					<tr>						<td>确认密码:</td>						<td><input name="passwd2" type="password" id="passwd2" class="text"></td>					</tr>					<tr>						<td>域名:</td>						<td><input name="domain" class="text"></td>					</tr>					{{if $entkey}}					<tr>						<td>优惠折抵:</td>						<td style="text-align: left"><div id='key_input' style='display: none'>								<input name="ent_key" id='key' class="text" size=32> <span id='checkresult'><input type='button' value='检测' class="submit" onclick='check_entkey()'></span>							</div>							<div id='key_onclick'>								<a href='javascript:show_entkey_input();'>[<strong class='red'>我有优惠码</strong>]								</a>							</div></td>					</tr>					{{/if}}					<tr>						<td>产品说明:</td>						<td style="text-align: left">{{$product.describe}}</td>					</tr>					<tr>						<td id="show_name">产品价格:</td>						<td id="show_price" style="text-align: left">{{if $product.noagentprice}}特价:{{/if}}{{($product.pay_cycle=='year') ? '每年' : "每月"}}/{{$product.price}}元 						<br>						 {{if $product.noagentprice}}<strong style='text-decoration: line-through'>原价:{{($product.pay_cycle=='year') ? '每年' : "每月"}}/{{$product.noagentprice}}元{{/if}}</strong>						</td>					</tr>					<tr>						<td class="td_hg" colspan="2" align="center"><input type="button" onClick="check_register()" value="确定" class="submit"></td>					</tr>					{{else}}						<tr>						<td colspan=2>{{$msg}}</td>					</tr>					{{/if}}				</table>			</form>		</div>		<!--//wrap_box_info-->	</div>	<!--//wrap_box--></div><!--//wrap_main--><script type='text/javascript'>	var nodename = '{{$nodename}}';	var product_id = '{{$product.id}}';</script><script type='text/javascript' src='{{$STATIC}}js/nproduct.js'></script><script type='text/javascript'>	var money = '{{$product.price}}';	function show_entkey_input() {		document.getElementById('key_onclick').style.display = 'none';		document.getElementById('key_input').style.display = 'block';	}	function checkMoney() {		$.ajax({			url : '?c=hosting&a=checkMoney&money=' + money,			dataType : 'json',			success : function(ret) {				if (ret['code'] != 200) {					art.dialog({						id : 'id22',						content : '<b class=red>余额不足'+money+'元,请充值后再继续本次操作</b>',						time : 4,						title : "提示",						icon : 'warning'					});				}			}		})	}	$(document).ready(function() {		checkMoney();	});	function check_entkey() {		var key = $.trim($("#key").val());		if (!key) {			return alert("请输入优惠折抵码");		}		$.ajax({			type : 'post',			url : '?c=entkey&a=checkKey',			data : 'key=' + key + '&product_id=' + product_id,			dataType : 'json',			success : function(ret) {				if (ret['code'] != 200) {					return alert(ret['msg'] ? ret['msg'] : '不可用');				}				//alert('可用');				$("#checkresult").html('<b class=red>*可用</b>');			}		});	}</script>