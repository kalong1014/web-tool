(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d8d5db7"],{"09b9":function(t,e,a){"use strict";t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}},"29ca":function(t,e,a){"use strict";var n=a("2b5f"),s=a("45b1"),i=a("064d"),o=a("6337"),r=a("3a4d"),l=a("09b9"),d=a("199e"),c=a("f55d"),_=a("85ec");s("search",(function(t,e,a){return[function(e){var a=r(this),s=o(e)?void 0:c(e,t);return s?n(s,e,a):new RegExp(e)[t](d(a))},function(t){var n=i(this),s=d(t),o=a(e,n,s);if(o.done)return o.value;var r=n.lastIndex;l(r,0)||(n.lastIndex=0);var c=_(n,s);return l(n.lastIndex,r)||(n.lastIndex=r),null===c?-1:c.index}]}))},3989:function(t,e,a){},"634a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container",staticStyle:{padding:"0"}},[a("div",{staticClass:"search"},[a("p",[a("span",{staticClass:"label"},[t._v(t._s(t._f("lang")("支付时间"))+"：")]),a("el-date-picker",{staticStyle:{width:"340px"},attrs:{align:"right",type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"range-separator":t._f("lang")("至"),"start-placeholder":t._f("lang")("时间开始"),"end-placeholder":t._f("lang")("时间结束"),size:"mini"},on:{change:t.dateChange},model:{value:t.search.date,callback:function(e){t.$set(t.search,"date",e)},expression:"search.date"}}),a("el-radio-group",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{change:t.dateTypeChange},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}},[a("el-radio-button",{attrs:{label:"day0"}},[t._v(t._s(t._f("lang")("今天")))]),a("el-radio-button",{attrs:{label:"day1"}},[t._v(t._s(t._f("lang")("昨天")))]),a("el-radio-button",{attrs:{label:"day2"}},[t._v(t._s(t._f("lang")("前天")))])],1)],1),a("p",[a("span",{staticClass:"label"},[t._v(t._s(t._f("lang")("用户ID"))+"：")]),a("el-input",{staticStyle:{width:"120px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:t._f("lang")("请输入用户id")},model:{value:t.search.user_id,callback:function(e){t.$set(t.search,"user_id",e)},expression:"search.user_id"}}),a("span",{staticClass:"label"},[t._v(t._s(t._f("lang")("订单号"))+"：")]),a("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:t._f("lang")("请输入单号")},model:{value:t.search.trade_no,callback:function(e){t.$set(t.search,"trade_no",e)},expression:"search.trade_no"}})],1),a("p",{staticStyle:{"padding-top":"10px"}},[a("span",{staticClass:"label"}),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:t.doSearch}},[t._v(t._s(t._f("lang")("筛选")))]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",plain:"",size:"mini"},on:{click:t.doInit}},[t._v(t._s(t._f("lang")("重置")))]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{loading:t.exportLoading,type:"text",icon:"el-icon-download",size:"mini"},on:{click:t.doExport}},[t._v(t._s(t._f("lang")("导出")))])],1)]),a("div",{staticClass:"box-panel",staticStyle:{"padding-bottom":"10px","margin-bottom":"0"}},[a("el-table",{attrs:{data:t.dataList,"element-loading-text":"加载中...",stripe:"",size:"medium","header-cell-class-name":"bg-gray"},on:{"row-dblclick":t.rowDblclick}},[a("el-table-column",{attrs:{label:t._f("lang")("订单来源"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["web"===e.row.platform?a("span",[t._v("PC")]):"h5"===e.row.platform?a("span",[t._v("H5")]):"wxapp"===e.row.platform?a("span",[t._v(t._s(t._f("lang")("微信小程序")))]):a("span",[t._v("-")])]}}])}),a("el-table-column",{attrs:{prop:"id",label:t._f("lang")("订单ID"),width:"120"}}),a("el-table-column",{attrs:{prop:"user_id",label:t._f("lang")("用户ID"),width:"120"}}),a("el-table-column",{attrs:{prop:"pay_time",label:t._f("lang")("支付时间"),width:"180"}}),a("el-table-column",{attrs:{prop:"total_fee",label:t._f("lang")("订单金额"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.total_fee))])]}}])}),a("el-table-column",{attrs:{prop:"out_trade_no",label:t._f("lang")("订单号"),width:"200"}}),a("el-table-column",{attrs:{label:t._f("lang")("类型"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.goods_id?a("span",[t._v(t._s(t._f("lang")("对话次数")))]):t._e(),e.row.draw_id?a("span",[t._v(t._s(t._f("lang")("绘画次数")))]):t._e(),e.row.video_id?a("span",[t._v(t._s(t._f("lang")("视频次数")))]):t._e(),e.row.gpt4_id?a("span",[t._v(t._s(t._f("lang")("高级版字数")))]):t._e(),e.row.vip_id?a("span",[t._v(t._s(t._f("lang")("VIP套餐")))]):t._e(),e.row.point_id?a("span",[t._v(t._s(t._f("lang")("积分套餐")))]):t._e()]}}])}),a("el-table-column",{attrs:{label:t._f("lang")("数量 / 时长"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.goods_id?a("span",[t._v(t._s(e.row.num)+" "+t._s(t._f("lang")("条")))]):t._e(),e.row.draw_id?a("span",[t._v(t._s(e.row.num)+" "+t._s(t._f("lang")("张")))]):t._e(),e.row.video_id?a("span",[t._v(t._s(e.row.num)+" "+t._s(t._f("lang")("条")))]):t._e(),e.row.gpt4_id?a("span",[t._v(t._s(e.row.num)+" "+t._s(t._f("lang")("万字")))]):t._e(),e.row.vip_id?a("span",[t._v(t._s(e.row.num)+" "+t._s(t._f("lang")("个月")))]):t._e(),e.row.point_id?a("span",[t._v(t._s(e.row.num)+" "+t._s(t.point_title||"积分"))]):t._e()]}}])}),a("el-table-column",{attrs:{label:t._f("lang")("订单状态"),width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"text-green"},[t._v(" "+t._s(t._f("lang")("支付成功"))+" ")]),1===e.row.is_refund?a("span",{staticClass:"text-danger"},[t._v(" ["+t._s(t._f("lang")("已退"))+"] ")]):t._e()]}}])}),a("el-table-column",{attrs:{label:t._f("lang")("操作")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",plain:"",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),t.showOrderDetail(e.row.out_trade_no)}}},[t._v(t._s(t._f("lang")("查看详情")))])]}}])})],1),a("div",{staticClass:"footer"},[a("div",{staticClass:"tongji"},[a("i",{staticClass:"el-icon-s-data text-green",staticStyle:{"font-size":"20px"}}),t._v(" "+t._s(t._f("lang")("共"))+" "),a("span",{staticClass:"text-green"},[t._v(" "+t._s(t.tongji.orderCount)+" ")]),t._v(" "+t._s(t._f("lang")("笔"))+"， "),a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.tongji.orderAmount)+" ")]),t._v(" "+t._s(t._f("lang")("元"))+" ")]),a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pagesize,layout:"total, prev, pager, next",total:t.dataTotal},on:{"current-change":t.pageChange}})],1)],1),a("order-detail",{attrs:{"trade-no":t.out_trade_no},on:{close:t.hideOrderDetail}})],1)},s=[],i=a("e089"),o=(a("cac0"),a("29ca"),a("f7c6"),a("0f4e"),a("f4f1"),a("f208"),a("fb0e"),a("30f8"),a("a7fa"),a("b838"),a("0d33"),a("2025"),a("6db4")),r=a("b775");function l(t){return Object(r["a"])({url:"/order/getList",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/order/getExportList",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/order/getOrderDetail",method:"post",data:t})}function _(t){return Object(r["a"])({url:"/order/getTongji",method:"post",data:t})}var p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.detail?a("div",[a("el-dialog",{attrs:{title:t._f("lang")("订单详情"),width:"500px","custom-class":"my-dialog",visible:!0,modal:!0,"modal-append-to-body":!0,"append-to-body":!0,"close-on-click-modal":!0,"close-on-press-escape":!0,"before-close":t.closeDetail}},[a("el-descriptions",{staticClass:"box",attrs:{title:"",column:1,border:"",size:"medium"}},[a("el-descriptions-item",{attrs:{label:t._f("lang")("订单来源")}},["web"===t.detail.platform?a("span",[t._v("PC")]):"h5"===t.detail.platform?a("span",[t._v("H5")]):"wxapp"===t.detail.platform?a("span",[t._v(t._s(t._f("lang")("微信小程序")))]):a("span",[t._v("-")])]),a("el-descriptions-item",{attrs:{label:t._f("lang")("商户单号")}},[t._v(" "+t._s(t.detail.out_trade_no)+" "),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.detail.out_trade_no,expression:"detail.out_trade_no",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopySuccess,expression:"onCopySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onCopyError,expression:"onCopyError",arg:"error"}],attrs:{type:"text",size:"mini"}},[t._v(t._s(t._f("lang")("复制")))])],1),a("el-descriptions-item",{attrs:{label:t._f("lang")("流水单号")}},[t._v(" "+t._s(t.detail.transaction_id)+" "),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.detail.transaction_id,expression:"detail.transaction_id",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopySuccess,expression:"onCopySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onCopyError,expression:"onCopyError",arg:"error"}],attrs:{type:"text",size:"mini"}},[t._v(t._s(t._f("lang")("复制")))])],1),a("el-descriptions-item",{attrs:{label:t._f("lang")("订单金额")}},[a("span",{staticClass:"total-fee text-danger"},[t._v(" ￥"+t._s(t.detail.total_fee)+" ")])]),a("el-descriptions-item",{attrs:{label:t._f("lang")("支付方式")}},["wxpay"===t.detail.pay_type?a("span",[a("svg-icon",{staticStyle:{color:"#04BE02"},attrs:{"icon-class":"wxpay"}}),t._v(" "+t._s(t._f("lang")("微信支付"))+" ")],1):t._e(),"alipay"===t.detail.pay_type?a("span",[a("svg-icon",{staticStyle:{color:"#027aff"},attrs:{"icon-class":"alipay"}}),t._v(" "+t._s(t._f("lang")("支付宝"))+" ")],1):t._e()]),a("el-descriptions-item",{attrs:{label:t._f("lang")("订单状态")}},[a("span",{staticClass:"text-green"},[t._v(" "+t._s(t._f("lang")("支付成功"))+" ")]),1===t.detail.is_refund?a("span",{staticClass:"text-danger",staticStyle:{"font-size":"12px"}},[t._v(" ["+t._s(t._f("lang")("已全额退款"))+"] ")]):t._e()]),a("el-descriptions-item",{attrs:{label:t._f("lang")("类型")}},[t.detail.goods_id?a("span",[t._v(t._s(t._f("lang")("对话次数")))]):t._e(),t.detail.draw_id?a("span",[t._v(t._s(t._f("lang")("绘画次数")))]):t._e(),t.detail.video_id?a("span",[t._v(t._s(t._f("lang")("视频次数")))]):t._e(),t.detail.gpt4_id?a("span",[t._v(t._s(t._f("lang")("高级版字数")))]):t._e(),t.detail.vip_id?a("span",[t._v(t._s(t._f("lang")("VIP套餐")))]):t._e(),t.detail.point_id?a("span",[t._v(t._s(t._f("lang")("积分套餐")))]):t._e()]),a("el-descriptions-item",{attrs:{label:t._f("lang")("数量 / 时长")}},[t.detail.goods_id?a("span",[t._v(t._s(t.detail.num)+" "+t._s(t._f("lang")("条")))]):t._e(),t.detail.draw_id?a("span",[t._v(t._s(t.detail.num)+" "+t._s(t._f("lang")("张")))]):t._e(),t.detail.video_id?a("span",[t._v(t._s(t.detail.num)+" "+t._s(t._f("lang")("条")))]):t._e(),t.detail.gpt4_id?a("span",[t._v(t._s(t.detail.num)+" "+t._s(t._f("lang")("万字")))]):t._e(),t.detail.vip_id?a("span",[t._v(t._s(t.detail.num)+" "+t._s(t._f("lang")("个月")))]):t._e(),t.detail.point_id?a("span",[t._v(t._s(t.detail.num)+" "+t._s(t.point_title||"积分"))]):t._e()]),a("el-descriptions-item",{attrs:{label:t._f("lang")(1===t.detail.is_refund?"退款时间":"支付时间")}},[t._v(" "+t._s(t.detail.pay_time)+" ")]),a("el-descriptions-item",{attrs:{label:t._f("lang")("用户ID")}},[t._v(" "+t._s(t.detail.user_id)+" ")])],1)],1)],1):t._e()},u=[],f={props:{tradeNo:{type:String,default:""}},data:function(){return{detail:null}},computed:Object(i["a"])({},Object(o["b"])(["point_title"])),watch:{tradeNo:function(){this.getOrderDetail()}},methods:{getOrderDetail:function(){var t=this;this.tradeNo&&c({order_no:this.tradeNo}).then((function(e){t.detail=e.data})).catch((function(e){t.errMsg=e.message}))},closeDetail:function(){this.detail=null,this.$emit("close")},onCopySuccess:function(){this.$message.success(this.$lang("已复制"))},onCopyError:function(){this.$message.error(this.$lang("复制失败"))}}},g=f,h=a("76b2"),m=Object(h["a"])(g,p,u,!1,null,null,null),v=m.exports,b={components:{orderDetail:v},data:function(){return{today:{amount:0,wxpay_amount:0,alipay_amount:0,user_count:0},dateType:"",search:{pay_type:"",trade_no:"",user_id:"",date:[]},tongji:{orderCount:0,orderAmount:0},payTypes:[{name:"",title:"请选择"},{name:"wxpay",title:"微信"},{name:"alipay",title:"支付宝"}],dataList:[],dataTotal:0,page:1,pagesize:10,out_trade_no:"",exportLoading:!1}},computed:Object(i["a"])({},Object(o["b"])(["point_title"])),mounted:function(){this.doInit()},methods:{doInit:function(){this.dateType="",this.search={pay_type:"",trade_no:"",user_id:"",date:[]},this.doSearch()},dateChange:function(){this.dateType=""},dateTypeChange:function(){var t="",e=this.dateFormat(new Date,"yyyy-MM-dd"),a=this.dateFormat(new Date((new Date).setDate((new Date).getDate()-1)),"yyyy-MM-dd"),n=this.dateFormat(new Date((new Date).setDate((new Date).getDate()-2)),"yyyy-MM-dd");"day0"===this.dateType?t=e:"day1"===this.dateType?t=a:"day2"===this.dateType&&(t=n),this.search.date=[t+" 00:00:00",t+" 23:59:59"]},dateFormat:function(t,e){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e},getList:function(){var t=this,e=Object.assign(this.search,{page:this.page,pagesize:this.pagesize});l(e).then((function(e){t.dataList=e.data.list,t.dataTotal=e.data.count})),1===this.page&&_(e).then((function(e){t.tongji=e.data}))},pageChange:function(t){this.page=t,this.getList()},toRefund:function(t){this.$router.replace({path:"/refund",query:{order_no:t}})},showOrderDetail:function(t){this.out_trade_no=t},hideOrderDetail:function(){this.out_trade_no=""},rowDblclick:function(t){this.showOrderDetail(t.out_trade_no)},closeDetail:function(){this.detail=null},onCopySuccess:function(){this.$message.success(this.$lang("已复制"))},onCopyError:function(){this.$message.error(this.$lang("复制失败"))},doSearch:function(){this.page=1,this.getList()},doExport:function(){var t=this;this.exportLoading=!0,d(this.search).then((function(e){Promise.all([a.e("chunk-9993aa90"),a.e("chunk-2133cd4f")]).then(a.bind(null,"4bf8")).then((function(a){var n="订单",s=["支付方式","支付时间","商户订单号","渠道流水单号","订单金额","数量 / 时长","状态"],i=["pay_type","pay_time","out_trade_no","transaction_id","total_fee","num","status"],o=e.data,r=t.formatJson(i,o);a.export_json_to_excel({header:s,data:r,filename:n,autoWidth:!0,bookType:"xlsx"}),t.exportLoading=!1}))}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))}}},y=b,w=(a("ef55"),Object(h["a"])(y,n,s,!1,null,"733ea40c",null));e["default"]=w.exports},ef55:function(t,e,a){"use strict";a("3989")},f208:function(t,e,a){"use strict";var n=a("bbaf"),s=a("add4"),i=a("e0ec"),o=a("218c"),r=a("0257").get,l=RegExp.prototype,d=TypeError;n&&s&&o(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===i(this))return!!r(this).dotAll;throw new d("Incompatible receiver, RegExp required")}}})},f4f1:function(t,e,a){"use strict";var n=a("bbaf"),s=a("e817"),i=a("9372"),o=a("e253"),r=a("8a85"),l=a("e488"),d=a("1490").f,c=a("3a6e"),_=a("4b9a"),p=a("199e"),u=a("7454"),f=a("8421"),g=a("6abb"),h=a("696a"),m=a("6368"),v=a("c668"),b=a("0257").enforce,y=a("71ff"),w=a("ee0d"),x=a("add4"),C=a("fafb"),S=w("match"),D=s.RegExp,E=D.prototype,k=s.SyntaxError,O=i(E.exec),T=i("".charAt),I=i("".replace),j=i("".indexOf),z=i("".slice),$=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,R=/a/g,M=/a/g,L=new D(R)!==R,N=f.MISSED_STICKY,A=f.UNSUPPORTED_Y,P=n&&(!L||N||x||C||m((function(){return M[S]=!1,D(R)!==R||D(M)===M||"/a/i"!==String(D(R,"i"))}))),F=function(t){for(var e,a=t.length,n=0,s="",i=!1;n<=a;n++)e=T(t,n),"\\"!==e?i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),s+=e):s+="[\\s\\S]":s+=e+T(t,++n);return s},H=function(t){for(var e,a=t.length,n=0,s="",i=[],o={},r=!1,l=!1,d=0,c="";n<=a;n++){if(e=T(t,n),"\\"===e)e+=T(t,++n);else if("]"===e)r=!1;else if(!r)switch(!0){case"["===e:r=!0;break;case"("===e:O($,z(t,n+1))&&(n+=2,l=!0),s+=e,d++;continue;case">"===e&&l:if(""===c||v(o,c))throw new k("Invalid capture group name");o[c]=!0,i[i.length]=[c,d],l=!1,c="";continue}l?c+=e:s+=e}return[s,i]};if(o("RegExp",P)){for(var q=function(t,e){var a,n,s,i,o,d,f=c(E,this),g=_(t),h=void 0===e,m=[],v=t;if(!f&&g&&h&&t.constructor===q)return t;if((g||c(E,t))&&(t=t.source,h&&(e=u(v))),t=void 0===t?"":p(t),e=void 0===e?"":p(e),v=t,x&&"dotAll"in R&&(n=!!e&&j(e,"s")>-1,n&&(e=I(e,/s/g,""))),a=e,N&&"sticky"in R&&(s=!!e&&j(e,"y")>-1,s&&A&&(e=I(e,/y/g,""))),C&&(i=H(t),t=i[0],m=i[1]),o=r(D(t,e),f?this:E,q),(n||s||m.length)&&(d=b(o),n&&(d.dotAll=!0,d.raw=q(F(t),a)),s&&(d.sticky=!0),m.length&&(d.groups=m)),t!==v)try{l(o,"source",""===v?"(?:)":v)}catch(y){}return o},J=d(D),Y=0;J.length>Y;)g(q,D,J[Y++]);E.constructor=q,q.prototype=E,h(s,"RegExp",q,{constructor:!0})}y("RegExp")},fb0e:function(t,e,a){"use strict";var n=a("bbaf"),s=a("8421").MISSED_STICKY,i=a("e0ec"),o=a("218c"),r=a("0257").get,l=RegExp.prototype,d=TypeError;n&&s&&o(l,"sticky",{configurable:!0,get:function(){if(this!==l){if("RegExp"===i(this))return!!r(this).sticky;throw new d("Incompatible receiver, RegExp required")}}})}}]);