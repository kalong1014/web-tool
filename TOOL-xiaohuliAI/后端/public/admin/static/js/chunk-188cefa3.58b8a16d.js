(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-188cefa3"],{"767f":function(t,e,a){},"82b9":function(t,e,a){"use strict";a("767f")},d7e5:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container",staticStyle:{padding:"0"}},[a("div",{staticClass:"search"},[a("p",[a("span",{staticClass:"label"},[t._v(t._s(t._f("lang")("时间"))+"：")]),a("el-date-picker",{staticStyle:{width:"340px"},attrs:{align:"right",type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"range-separator":t._f("lang")("至"),"start-placeholder":t._f("lang")("时间开始"),"end-placeholder":t._f("lang")("时间结束"),size:"mini"},on:{change:t.dateChange},model:{value:t.search.date,callback:function(e){t.$set(t.search,"date",e)},expression:"search.date"}}),a("el-radio-group",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{change:t.dateTypeChange},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}},[a("el-radio-button",{attrs:{label:"day0"}},[t._v(t._s(t._f("lang")("今天")))]),a("el-radio-button",{attrs:{label:"day1"}},[t._v(t._s(t._f("lang")("昨天")))]),a("el-radio-button",{attrs:{label:"day2"}},[t._v(t._s(t._f("lang")("前天")))])],1)],1),a("p",[a("span",{staticClass:"label"},[t._v(t._s(t._f("lang")("用户ID"))+"：")]),a("el-input",{staticStyle:{width:"120px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:t._f("lang")("请输入用户id")},model:{value:t.search.user_id,callback:function(e){t.$set(t.search,"user_id",e)},expression:"search.user_id"}}),a("span",{staticClass:"label"},[t._v(t._s(t._f("lang")("作品名"))+"：")]),a("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:t._f("lang")("请输入关键词")},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1),a("p",{staticStyle:{"padding-top":"10px"}},[a("span",{staticClass:"label"}),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:t.doSearch}},[t._v(t._s(t._f("lang")("筛选")))]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",plain:"",size:"mini"},on:{click:t.doInit}},[t._v(t._s(t._f("lang")("重置")))])],1)]),a("div",{staticClass:"box-panel",staticStyle:{"padding-bottom":"10px","margin-bottom":"0"}},[a("el-table",{attrs:{data:t.dataList,stripe:"",size:"medium","header-cell-class-name":"bg-gray"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"create_time",label:t._f("lang")("时间"),width:"170"}}),a("el-table-column",{attrs:{prop:"user_id",label:t._f("lang")("用户ID"),width:"80"}}),a("el-table-column",{attrs:{prop:"message",label:t._f("lang")("用户输入")}}),a("el-table-column",{attrs:{label:t._f("lang")("AI回复"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"large"},on:{click:function(a){return t.showMindDialog(e.row.response)}}},[t._v(t._s(e.row.channel))])]}}])}),a("el-table-column",{attrs:{prop:"total_tokens",label:t._f("lang")("消耗tokens"),width:"100"}}),a("el-table-column",{attrs:{prop:"user_ip",label:t._f("lang")("用户IP"),width:"180"}}),a("el-table-column",{attrs:{label:t._f("lang")("操作"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text text-danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(a){return a.preventDefault(),t.doDel(e.row.id)}}},[t._v(t._s(t._f("lang")("删除")))])]}}])})],1),a("div",{staticClass:"footer"},[a("div",{staticClass:"tongji"},[a("i",{staticClass:"el-icon-s-data text-green",staticStyle:{"font-size":"20px"}}),t._v(" "+t._s(t._f("lang")("共"))+" "),a("span",{staticClass:"text-green"},[t._v(" "+t._s(t.tongji.msgCount)+" ")]),t._v(" "+t._s(t._f("lang")("条问题"))+"， "),a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.tongji.msgTokens)+" ")]),t._v(" tokens ")]),a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pagesize,layout:"total, prev, pager, next",total:t.dataTotal},on:{"current-change":t.pageChange}})],1),t.dialogMindMsg?a("div",[a("el-dialog",{attrs:{"custom-class":"my-dialog",title:t._f("lang")("内容"),width:"1200px",top:"50px",visible:!0,"close-on-click-modal":!0,"before-close":t.closeMindDialog}},[a("div",{staticStyle:{width:"100%",height:"600px"}},[a("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"minder-container"}})]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:t.closeMindDialog}},[t._v(t._s(t._f("lang")("关 闭")))])],1)])],1):t._e()],1)])},i=[],s=(a("cac0"),a("29ca"),a("f7c6"),a("0f4e"),a("f4f1"),a("f208"),a("fb0e"),a("30f8"),a("8198"),a("eca0"),a("9345"),a("28a3"),a("b775"));function l(t){return Object(s["a"])({url:"/mind/getMindList",method:"post",data:t})}function o(t){return Object(s["a"])({url:"/mind/getMindTongji",method:"post",data:t})}function r(t){return Object(s["a"])({url:"/mind/delMind",method:"post",data:t})}var d={data:function(){return{minder:"",dataList:[],dataTotal:0,page:1,pagesize:20,dateType:"",search:{date:[],user_id:"",keyword:""},tongji:{msgCount:0,msgTokens:0},dialogMindMsg:""}},created:function(){this.doInit()},methods:{doInit:function(){this.dateType="",this.search={date:[],user_id:"",keyword:""},this.doSearch()},getMindList:function(){var t=this,e=Object.assign(this.search,{page:this.page,pagesize:this.pagesize});l(e).then((function(e){t.dataList=e.data.list,t.dataTotal=e.data.count})),1===this.page&&o(e).then((function(e){t.tongji=e.data}))},tableIndex:function(t){return this.pagesize*(this.page-1)+t+1},pageChange:function(t){this.page=t,this.getMindList()},doSearch:function(){this.page=1,this.getMindList()},dateChange:function(){this.dateType=""},dateTypeChange:function(){var t="",e=this.dateFormat(new Date,"yyyy-MM-dd"),a=this.dateFormat(new Date((new Date).setDate((new Date).getDate()-1)),"yyyy-MM-dd"),n=this.dateFormat(new Date((new Date).setDate((new Date).getDate()-2)),"yyyy-MM-dd");"day0"===this.dateType?t=e:"day1"===this.dateType?t=a:"day2"===this.dateType&&(t=n),this.search.date=[t+" 00:00:00",t+" 23:59:59"]},dateFormat:function(t,e){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e},showMindDialog:function(t){t=t.replaceAll("```markdown",""),t=t.replaceAll("```",""),this.dialogMindMsg=t,this.$nextTick((function(){var e=new window.kityminder.Minder({renderTo:"#minder-container"});e.importData("markdown",t),setTimeout((function(){e.execCommand("theme","fresh-green-compat")}),100)}))},closeMindDialog:function(){this.dialogMindMsg=""},doDel:function(t){var e=this;this.$confirm("确定删除吗?","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then((function(){r({id:t}).then((function(t){e.getMindList(),e.$message.success(t.message)}))}))}}},c=d,g=(a("82b9"),a("76b2")),p=Object(g["a"])(c,n,i,!1,null,"bddf546a",null);e["default"]=p.exports}}]);