(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2eda0e8a"],{"2dea":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"toolbar"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.clickAdd}},[t._v(t._s(t._f("lang")("添加关键词")))])],1),a("el-table",{attrs:{data:t.dataList,stripe:"",size:"medium","header-cell-class-name":"bg-gray"}},[a("el-table-column",{attrs:{prop:"weight",label:t._f("lang")("权重"),width:"100"}}),a("el-table-column",{attrs:{prop:"keyword",label:t._f("lang")("关键词"),width:"400"}}),a("el-table-column",{attrs:{label:t._f("lang")("匹配方式"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.is_hit?a("span",[t._v(t._s(t._f("lang")("精准匹配")))]):a("span",[t._v(t._s(t._f("lang")("包含关键词")))])]}}])}),a("el-table-column",{attrs:{label:t._f("lang")("回复类型"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["text"===e.row.type?a("span",[t._v(t._s(t._f("lang")("文本")))]):t._e(),"image"===e.row.type?a("span",[t._v(t._s(t._f("lang")("图片")))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"state",label:t._f("lang")("是否启用"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.setState(e.row.id,a)}},model:{value:e.row.state,callback:function(a){t.$set(e.row,"state",a)},expression:"scope.row.state"}})]}}])}),a("el-table-column",{attrs:{label:t._f("lang")("操作")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(a){return a.preventDefault(),t.clickEdit(e.row.id)}}},[t._v(t._s(t._f("lang")("编辑")))]),a("el-button",{attrs:{type:"text text-danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(a){return a.preventDefault(),t.doDel(e.row.id)}}},[t._v(t._s(t._f("lang")("删除")))])],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pagesize,layout:"total, prev, pager, next",total:t.dataTotal},on:{"current-change":t.pageChange}}),t.form?a("div",[a("el-dialog",{attrs:{"custom-class":"my-dialog",title:t._f("lang")(t.formTitle),width:"800px",visible:!0,"close-on-click-modal":!1,"before-close":t.formClose}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:t._f("lang")("权重"),prop:"weight"}},[a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:t._f("lang")("越大越优先"),size:"normal"},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}})],1),a("el-form-item",{attrs:{label:t._f("lang")("关键词"),prop:"keyword"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:t._f("lang")("关键词"),size:"normal"},model:{value:t.form.keyword,callback:function(e){t.$set(t.form,"keyword",e)},expression:"form.keyword"}})],1),a("el-form-item",{attrs:{label:t._f("lang")("匹配方式"),prop:"is_hit"}},[a("el-radio-group",{model:{value:t.form["is_hit"],callback:function(e){t.$set(t.form,"is_hit",e)},expression:"form['is_hit']"}},[a("el-radio",{attrs:{label:1,size:"mini"}},[t._v(t._s(t._f("lang")("精准匹配")))]),a("el-radio",{attrs:{label:0,size:"mini"}},[t._v(t._s(t._f("lang")("包含关键词")))])],1)],1),a("el-form-item",{attrs:{label:t._f("lang")("回复内容")}},[a("replyEditor",{ref:"replyEditor",attrs:{type:t.form.type,content:t.form.content,image:t.form.image}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:t.formClose}},[t._v(t._s(t._f("lang")("取 消")))]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:t.doSubmit}},[t._v(t._s(t._f("lang")("提 交")))])],1)],1)],1):t._e()],1)},n=[],o=a("da33"),l=a("4d7a"),r={components:{replyEditor:l["a"]},data:function(){return{form:null,formType:null,dataList:[],dataTotal:0,page:1,pagesize:20,formRules:{weight:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],keyword:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],is_hit:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],content:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}]}}},computed:{formTitle:function(){return"add"===this.formType?"添加关键词":"编辑"}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;Object(o["c"])({page:this.page,pagesize:this.pagesize}).then((function(e){t.dataList=e.data.list,t.dataTotal=e.data.count}))},pageChange:function(t){this.page=t,this.getList()},clickAdd:function(){this.formType="add",this.form={weight:100,is_hit:1}},clickEdit:function(t){var e=this;Object(o["b"])({id:t}).then((function(t){e.formType="edit",e.form=t.data}))},formClose:function(){this.form=null,this.formType=""},doSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(e){var a=t.$refs["replyEditor"].getReply(),i=a.type,n=a.content,l=a.image;t.form.type=i,t.form.content=n,t.form.image=l,Object(o["f"])(t.form).then((function(e){t.getList(),t.$message.success(e.message),t.formClose()}))}else console.log("请填写必填项")}))},doDel:function(t){var e=this;this.$confirm("删除后不可回复，确定删除吗?","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["a"])({id:t}).then((function(t){e.getList(),e.$message.success(t.message)}))}))},setState:function(t,e){var a=this;Object(o["g"])({id:t,state:e}).then((function(t){a.getList(),a.$message.success(t.message)}))}}},s=r,c=(a("6548"),a("76b2")),u=Object(c["a"])(s,i,n,!1,null,"38cca91a",null);e["default"]=u.exports},"433a":function(t,e,a){"use strict";a("7153")},"4d7a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("el-radio-group",{model:{value:t.form["type"],callback:function(e){t.$set(t.form,"type",e)},expression:"form['type']"}},[a("el-radio",{attrs:{label:"text",size:"mini"}},[t._v(t._s(t._f("lang")("文字")))]),a("el-radio",{attrs:{label:"image",size:"mini"}},[t._v(t._s(t._f("lang")("图片")))])],1)],1),"text"===t.form["type"]?a("div",[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:6,placeholder:t._f("lang")("输入文字内容"),size:"small"},model:{value:t.form["content"],callback:function(e){t.$set(t.form,"content",e)},expression:"form['content']"}}),a("p",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:t.showLinkForm}},[t._v(t._s(t._f("lang")("插入链接")))])],1)],1):t._e(),"image"===t.form["type"]?a("div",[a("el-input",{staticStyle:{width:"400px"},attrs:{type:"text",placeholder:t._f("lang")("输入图片地址或上传图片"),size:"small"},model:{value:t.form["image"],callback:function(e){t.$set(t.form,"image",e)},expression:"form['image']"}}),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"",data:{type:"image"},"http-request":t.uploadImage,"show-file-list":!1,multiple:!1}},[t.form["image"]?a("img",{staticClass:"avatar",staticStyle:{height:"100px",width:"auto"},attrs:{src:t.form["image"]}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"100px",height:"100px","line-height":"100px"}})]),a("span",[t._v(t._s(t._f("lang")("10MB以内，支持bmp/png/jpeg/jpg/gif格式")))])],1):t._e(),t.linkForm?a("div",[a("el-dialog",{attrs:{"custom-class":"my-dialog",title:t._f("lang")("插入链接"),width:"460px",visible:!0,"append-to-body":!0,"close-on-click-modal":!1,"before-close":t.closeLinkForm}},[a("el-form",{ref:"form",attrs:{model:t.linkForm,rules:t.linkFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:t._f("lang")("标题"),prop:"title"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:t._f("lang")("链接标题"),size:"small"},model:{value:t.linkForm.title,callback:function(e){t.$set(t.linkForm,"title",e)},expression:"linkForm.title"}})],1),a("el-form-item",{attrs:{label:t._f("lang")("链接"),prop:"url"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:t._f("lang")("http:// 或 https://"),size:"small"},model:{value:t.linkForm.url,callback:function(e){t.$set(t.linkForm,"url",e)},expression:"linkForm.url"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:t.closeLinkForm}},[t._v(t._s(t._f("lang")("取 消")))]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:t.sumitLinkForm}},[t._v(t._s(t._f("lang")("提 交")))])],1)],1)],1):t._e()])},n=[],o=(a("f17d"),a("91b6")),l={props:{type:{type:String,default:"text"},content:{type:String,default:""},image:{type:String,default:""}},data:function(){return{form:{type:"text",content:"",image:""},formRules:{type:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],content:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],image:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}]},linkForm:null,linkFormRules:{title:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],url:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}]}}},watch:{type:function(){this.form.type=this.type},content:function(){this.form.content=this.content},image:function(){this.form.image=this.image}},mounted:function(){this.form.type=this.type,this.form.content=this.content,this.form.image=this.image},methods:{getReply:function(){return this.form},uploadImage:function(t){var e=this,a=new FormData;a.append("file",t.file),t.data&&a.append("data",JSON.stringify(t.data)),Object(o["a"])(a).then((function(a){e.$set(e.form,t.data.type,a.data.path),e.$message.success(e.$lang("上传成功"))}))},showLinkForm:function(){this.linkForm={}},closeLinkForm:function(){this.linkForm=null},sumitLinkForm:function(){this.form.content+='<a href="'+this.linkForm.url+'">'+this.linkForm.title+"</a>",this.closeLinkForm()}}},r=l,s=(a("433a"),a("7d71"),a("76b2")),c=Object(s["a"])(r,i,n,!1,null,"5df40938",null);e["a"]=c.exports},6548:function(t,e,a){"use strict";a("9bf5")},7153:function(t,e,a){},"7d71":function(t,e,a){"use strict";a("bbb0")},"91b6":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o}));var i=a("b775");function n(t){return Object(i["a"])({url:"/upload/image",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/upload/pem",method:"post",data:t})}},"9bf5":function(t,e,a){},bbb0:function(t,e,a){},da33:function(t,e,a){"use strict";a.d(e,"e",(function(){return n})),a.d(e,"i",(function(){return o})),a.d(e,"d",(function(){return l})),a.d(e,"h",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return c})),a.d(e,"f",(function(){return u})),a.d(e,"a",(function(){return f})),a.d(e,"g",(function(){return m}));var i=a("b775");function n(t){return Object(i["a"])({url:"/wxmp/getWxmpSetting",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/wxmp/setWxmpSetting",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/wxmp/getWxmpReply",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/wxmp/setWxmpReply",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/wxmp/getKeywordList",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/wxmp/getKeyword",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/wxmp/saveKeyword",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/wxmp/delKeyword",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/wxmp/setKeywordState",method:"post",data:t})}}}]);