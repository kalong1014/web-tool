(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b347788e"],{"09b9":function(e,t,a){"use strict";e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}},"29ca":function(e,t,a){"use strict";var s=a("2b5f"),i=a("45b1"),l=a("064d"),r=a("6337"),n=a("3a4d"),o=a("09b9"),c=a("199e"),p=a("f55d"),d=a("85ec");i("search",(function(e,t,a){return[function(t){var a=n(this),i=r(t)?void 0:p(t,e);return i?s(i,t,a):new RegExp(t)[e](c(a))},function(e){var s=l(this),i=c(e),r=a(t,s,i);if(r.done)return r.value;var n=s.lastIndex;o(n,0)||(s.lastIndex=0);var p=d(s,i);return o(s.lastIndex,n)||(s.lastIndex=n),null===p?-1:p.index}]}))},"9dc9":function(e,t,a){"use strict";a("ca7d")},ca7d:function(e,t,a){},e382:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",staticStyle:{padding:"0"}},[a("div",{staticClass:"toolbar",staticStyle:{padding:"20px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.clickCreate}},[e._v(e._s(e._f("lang")("创建账号")))]),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{attrs:{type:"text",icon:"el-icon-document",size:"mini"},on:{click:e.downloadTemplate}},[e._v(e._s(e._f("lang")("下载导入模板")))]),a("el-upload",{staticStyle:{"margin-left":"20px"},attrs:{"before-upload":e.checkExcelFile,"on-success":e.importSuccess,"show-file-list":!1,action:"/admin.php/user/importUser"}},[a("el-button",{attrs:{type:"default",icon:"el-icon-upload2",size:"mini"}},[e._v(e._s(e._f("lang")("批量导入账号")))])],1)],1)],1),a("div",{staticClass:"search",staticStyle:{margin:"0 20px"}},[a("p",[a("span",{staticClass:"label"},[e._v(e._s(e._f("lang")("类型"))+"：")]),a("el-radio-group",{attrs:{size:"mini"},model:{value:e.search.is_vip,callback:function(t){e.$set(e.search,"is_vip",t)},expression:"search.is_vip"}},[a("el-radio",{attrs:{label:"all"}},[e._v(e._s(e._f("lang")("全部")))]),a("el-radio",{attrs:{label:"no"}},[e._v(e._s(e._f("lang")("普通用户")))]),a("el-radio",{attrs:{label:"yes"}},[e._v(e._s(e._f("lang")("VIP会员")))])],1)],1),a("p",[a("span",{staticClass:"label"},[e._v(e._s(e._f("lang")("注册时间"))+"：")]),a("el-date-picker",{staticStyle:{width:"340px"},attrs:{align:"right",type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"range-separator":e._f("lang")("至"),"start-placeholder":e._f("lang")("时间开始"),"end-placeholder":e._f("lang")("时间结束"),size:"mini"},on:{change:e.dateChange},model:{value:e.search.date,callback:function(t){e.$set(e.search,"date",t)},expression:"search.date"}}),a("el-radio-group",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{change:e.dateTypeChange},model:{value:e.dateType,callback:function(t){e.dateType=t},expression:"dateType"}},[a("el-radio-button",{attrs:{label:"day0"}},[e._v(e._s(e._f("lang")("今天")))]),a("el-radio-button",{attrs:{label:"day1"}},[e._v(e._s(e._f("lang")("昨天")))]),a("el-radio-button",{attrs:{label:"day2"}},[e._v(e._s(e._f("lang")("前天")))])],1)],1),a("p",[a("span",{staticClass:"label"},[e._v(e._s(e._f("lang")("用户ID"))+"：")]),a("el-input",{staticStyle:{width:"100px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:e._f("lang")("用户id")},model:{value:e.search.user_id,callback:function(t){e.$set(e.search,"user_id",t)},expression:"search.user_id"}}),a("span",{staticClass:"label"},[e._v(e._s(e._f("lang")("昵称"))+"：")]),a("el-input",{staticStyle:{width:"100px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:e._f("lang")("昵称")},model:{value:e.search.nickname,callback:function(t){e.$set(e.search,"nickname",t)},expression:"search.nickname"}}),a("span",{staticClass:"label"},[e._v(e._s(e._f("lang")("手机号"))+"：")]),a("el-input",{staticStyle:{width:"130px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:e._f("lang")("手机号")},model:{value:e.search.phone,callback:function(t){e.$set(e.search,"phone",t)},expression:"search.phone"}}),a("span",{staticClass:"label"},[e._v(e._s(e._f("lang")("推荐人ID"))+"：")]),a("el-input",{staticStyle:{width:"100px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:e._f("lang")("推荐人ID")},model:{value:e.search.tuid,callback:function(t){e.$set(e.search,"tuid",t)},expression:"search.tuid"}})],1),a("p",[a("span",{staticClass:"label"},[e._v(e._s(e._f("lang")("排序方式"))+"：")]),a("el-radio-group",{attrs:{size:"mini"},model:{value:e.search.orderby,callback:function(t){e.$set(e.search,"orderby",t)},expression:"search.orderby"}},[a("el-radio",{attrs:{label:"id desc"}},[e._v(e._s(e._f("lang")("注册时间")))]),a("el-radio",{attrs:{label:"balance_point desc"}},[e._v(e._s(e.point_title||"积分"))]),a("el-radio",{attrs:{label:"vip_expire_time desc"}},[e._v(e._s(e._f("lang")("会员到期时间")))])],1)],1),a("p",{staticStyle:{"padding-top":"10px"}},[a("span",{staticClass:"label"}),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:e.doSearch}},[e._v(e._s(e._f("lang")("筛选")))]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",plain:"",size:"mini"},on:{click:e.doInit}},[e._v(e._s(e._f("lang")("重置")))])],1)]),a("div",{staticClass:"box-panel",staticStyle:{"padding-bottom":"10px","margin-bottom":"0"}},[a("el-table",{attrs:{data:e.dataList,stripe:"",size:"medium","header-cell-class-name":"bg-gray"}},[a("el-table-column",{attrs:{prop:"id",label:e._f("lang")("用户ID"),width:"80"}}),a("el-table-column",{attrs:{prop:"create_time",label:e._f("lang")("注册时间"),width:"160"}}),a("el-table-column",{attrs:{label:e._f("lang")("头像昵称"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("img",{staticStyle:{height:"24px","margin-right":"5px"},attrs:{src:t.row.avatar}}),e._v(" "+e._s(t.row.nickname)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"phone",label:e._f("lang")("手机号"),width:"150"}}),a("el-table-column",{attrs:{label:e._f("lang")("会员"),width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),e.showVipForm(t.row.id,t.row.vip_expire_time)}}},[e._v(e._s(e._f("lang")(t.row.vip_expire_time||"未开通")))])]}}])}),a("el-table-column",{attrs:{label:e._f("lang")("积分余额"),width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),e.showRecharge(t.row.id,"point")}}},[e._v(e._s(t.row.balance_point)+" "+e._s(e.point_title||"积分"))])]}}])}),a("el-table-column",{attrs:{label:e._f("lang")("共消费"),width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.order_total)+" "+e._s(e._f("lang")("元"))+" ")]}}])}),a("el-table-column",{attrs:{label:e._f("lang")("共提问"),width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.msg_count)+" "+e._s(e._f("lang")("条"))+" ")]}}])}),a("el-table-column",{attrs:{prop:"commission1",label:e._f("lang")("推荐人")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.tuser?a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("img",{staticStyle:{height:"24px","margin-right":"5px"},attrs:{src:t.row.tuser.avatar}}),e._v(" "+e._s(t.row.tuser.nickname)+" [ID: "+e._s(t.row.tuid)+"] ")]):e._e()]}}])})],1),a("div",{staticClass:"footer"},[a("div",{staticClass:"tongji"},[a("i",{staticClass:"el-icon-s-data text-green",staticStyle:{"font-size":"20px"}}),e._v(" "+e._s(e._f("lang")("共"))+" "),a("span",{staticClass:"text-green"},[e._v(" "+e._s(e.tongji.userCount)+" ")]),e._v(" "+e._s(e._f("lang")("用户"))+"，"+e._s(e.point_title||"积分")+"余额 "),a("span",{staticClass:"text-danger"},[e._v(" "+e._s(e.tongji.userBalance)+" ")])]),a("el-pagination",{attrs:{"current-page":e.page,"page-size":e.pagesize,layout:"total, prev, pager, next",total:e.dataTotal},on:{"current-change":e.pageChange}})],1)],1),e.createForm?a("div",[a("el-dialog",{attrs:{"custom-class":"my-dialog",title:e._f("lang")("创建账号"),width:"480px",visible:!0,"close-on-click-modal":!1,"append-to-body":!0,"before-close":e.closeCreate}},[a("el-form",{ref:"form",attrs:{model:e.createForm,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:e._f("lang")("手机号"),prop:"phone"}},[a("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:e._f("lang")("登录账号（手机号）"),size:"small"},model:{value:e.createForm.phone,callback:function(t){e.$set(e.createForm,"phone",t)},expression:"createForm.phone"}})],1),a("el-form-item",{attrs:{label:e._f("lang")("密码"),prop:"password"}},[a("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:e._f("lang")("登录密码"),size:"small"},model:{value:e.createForm.password,callback:function(t){e.$set(e.createForm,"password",t)},expression:"createForm.password"}})],1),a("el-form-item",{attrs:{label:e._f("lang")("推荐人ID"),prop:"tuid"}},[a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:e._f("lang")("没有则留空"),size:"small"},model:{value:e.createForm.tuid,callback:function(t){e.$set(e.createForm,"tuid",t)},expression:"createForm.tuid"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:e.closeCreate}},[e._v(e._s(e._f("lang")("取 消")))]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:e.doCreate}},[e._v(e._s(e._f("lang")("确 定")))])],1)],1)],1):e._e(),e.rechargeForm?a("div",[a("el-dialog",{attrs:{"custom-class":"my-dialog",title:e._f("lang")("余额充值"),width:"600px",visible:!0,"close-on-click-modal":!1,"append-to-body":!0,"before-close":e.closeRecharge}},[a("el-form",{ref:"form",attrs:{model:e.rechargeForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:e._f("lang")("充值类型"),prop:"type"}},[a("el-radio-group",{model:{value:e.rechargeForm["type"],callback:function(t){e.$set(e.rechargeForm,"type",t)},expression:"rechargeForm['type']"}},[a("el-radio",{staticStyle:{margin:"0 20px 5px 0"},attrs:{label:"point",size:"mini"}},[e._v(e._s(e._f("lang")("积分余额")))])],1)],1),a("el-form-item",{attrs:{label:e._f("lang")("充值数量"),prop:"num"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:e._f("lang")("填入整数"),size:"small"},model:{value:e.rechargeForm.num,callback:function(t){e.$set(e.rechargeForm,"num",t)},expression:"rechargeForm.num"}}),"point"===e.rechargeForm.type?a("span",{staticStyle:{color:"#666","margin-left":"10px"}},[e._v(e._s(e.point_title||"积分"))]):e._e(),a("p",{staticStyle:{color:"#999"}},[e._v(e._s(e._f("lang")("正数为增加，负数为减少")))])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:e.closeRecharge}},[e._v(e._s(e._f("lang")("取 消")))]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:e.doRecharge}},[e._v(e._s(e._f("lang")("提 交")))])],1)],1)],1):e._e(),e.vipForm?a("div",[a("el-dialog",{attrs:{"custom-class":"my-dialog",title:e._f("lang")("设置vip会员时间"),width:"480px",visible:!0,"close-on-click-modal":!1,"append-to-body":!0,"before-close":e.closeVipForm}},[a("el-form",{ref:"form",attrs:{model:e.vipForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:e._f("lang")("到期时间"),prop:"vip_expire_time"}},[a("el-date-picker",{attrs:{type:"date",placeholder:e._f("lang")("留空则表示关闭会员"),"value-format":"yyyy-MM-dd",editable:"",clearable:""},model:{value:e.vipForm.vip_expire_time,callback:function(t){e.$set(e.vipForm,"vip_expire_time",t)},expression:"vipForm.vip_expire_time"}}),a("p",[e._v(e._s(e._f("lang")("留空表示关闭会员")))])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:e.closeVipForm}},[e._v(e._s(e._f("lang")("取 消")))]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:e.setVipTime}},[e._v(e._s(e._f("lang")("提 交")))])],1)],1)],1):e._e()])},i=[],l=a("e089"),r=(a("cac0"),a("29ca"),a("f7c6"),a("0f4e"),a("f4f1"),a("f208"),a("fb0e"),a("30f8"),a("6db4")),n=a("c24f"),o={data:function(){return{dataList:[],dataTotal:0,page:1,pagesize:15,dateType:"",search:{},tongji:{userCount:0,userBalance:0},createForm:null,rechargeForm:null,vipForm:null,formRules:{phone:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],password:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}]}}},computed:Object(l["a"])({},Object(r["b"])(["point_title"])),created:function(){this.doInit()},methods:{doInit:function(){this.dateType="",this.search={date:[],user_id:"",is_vip:"all",nickname:"",phone:"",tuid:"",orderby:"id desc"},this.doSearch()},getList:function(){var e=this,t=Object.assign(this.search,{page:this.page,pagesize:this.pagesize});Object(n["l"])(t).then((function(t){e.dataList=t.data.list,e.dataTotal=t.data.count})),1===this.page&&Object(n["k"])(t).then((function(t){e.tongji=t.data}))},tableIndex:function(e){return this.pagesize*(this.page-1)+e+1},pageChange:function(e){this.page=e,this.getList()},doSearch:function(){this.page=1,this.getList()},dateChange:function(){this.dateType=""},dateTypeChange:function(){var e="",t=this.dateFormat(new Date,"yyyy-MM-dd"),a=this.dateFormat(new Date((new Date).setDate((new Date).getDate()-1)),"yyyy-MM-dd"),s=this.dateFormat(new Date((new Date).setDate((new Date).getDate()-2)),"yyyy-MM-dd");"day0"===this.dateType?e=t:"day1"===this.dateType?e=a:"day2"===this.dateType&&(e=s),this.search.date=[e+" 00:00:00",e+" 23:59:59"]},dateFormat:function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[s]:("00"+a[s]).substr((""+a[s]).length)));return t},clickCreate:function(){this.createForm={}},closeCreate:function(){this.createForm=null},showRecharge:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chat";this.rechargeForm={type:t,user_id:e}},closeRecharge:function(){this.rechargeForm=null},doCreate:function(){var e=this;Object(n["e"])(this.createForm).then((function(t){e.getList(),e.$message.success(t.message),e.closeCreate()}))},doRecharge:function(){var e=this;Object(n["g"])(this.rechargeForm).then((function(t){e.getList(),e.$message.success(t.message),e.closeRecharge()}))},showVipForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.vipForm={user_id:e,vip_expire_time:t}},closeVipForm:function(){this.vipForm=null},setVipTime:function(){var e=this;Object(n["p"])(this.vipForm).then((function(t){e.getList(),e.$message.success(t.message),e.closeVipForm()}))},downloadTemplate:function(){window.location.href="/static/user.xlsx"},checkExcelFile:function(e){if("application/vnd.ms-excel"!==e.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==e.type)return this.$message.error(this.$lang("请上传Excel文件")),!1},importSuccess:function(e,t,a){this.getList(),this.$message.success(e.message)}}},c=o,p=(a("9dc9"),a("76b2")),d=Object(p["a"])(c,s,i,!1,null,"40f997df",null);t["default"]=d.exports},f208:function(e,t,a){"use strict";var s=a("bbaf"),i=a("add4"),l=a("e0ec"),r=a("218c"),n=a("0257").get,o=RegExp.prototype,c=TypeError;s&&i&&r(o,"dotAll",{configurable:!0,get:function(){if(this!==o){if("RegExp"===l(this))return!!n(this).dotAll;throw new c("Incompatible receiver, RegExp required")}}})},f4f1:function(e,t,a){"use strict";var s=a("bbaf"),i=a("e817"),l=a("9372"),r=a("e253"),n=a("8a85"),o=a("e488"),c=a("1490").f,p=a("3a6e"),d=a("4b9a"),u=a("199e"),f=a("7454"),g=a("8421"),m=a("6abb"),h=a("696a"),_=a("6368"),b=a("c668"),v=a("0257").enforce,y=a("71ff"),x=a("ee0d"),w=a("add4"),k=a("fafb"),F=x("match"),S=i.RegExp,C=S.prototype,z=i.SyntaxError,R=l(C.exec),E=l("".charAt),$=l("".replace),D=l("".indexOf),T=l("".slice),I=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M=/a/g,j=/a/g,O=new S(M)!==M,L=g.MISSED_STICKY,V=g.UNSUPPORTED_Y,q=s&&(!O||L||w||k||_((function(){return j[F]=!1,S(M)!==M||S(j)===j||"/a/i"!==String(S(M,"i"))}))),A=function(e){for(var t,a=e.length,s=0,i="",l=!1;s<=a;s++)t=E(e,s),"\\"!==t?l||"."!==t?("["===t?l=!0:"]"===t&&(l=!1),i+=t):i+="[\\s\\S]":i+=t+E(e,++s);return i},Y=function(e){for(var t,a=e.length,s=0,i="",l=[],r={},n=!1,o=!1,c=0,p="";s<=a;s++){if(t=E(e,s),"\\"===t)t+=E(e,++s);else if("]"===t)n=!1;else if(!n)switch(!0){case"["===t:n=!0;break;case"("===t:R(I,T(e,s+1))&&(s+=2,o=!0),i+=t,c++;continue;case">"===t&&o:if(""===p||b(r,p))throw new z("Invalid capture group name");r[p]=!0,l[l.length]=[p,c],o=!1,p="";continue}o?p+=t:i+=t}return[i,l]};if(r("RegExp",q)){for(var H=function(e,t){var a,s,i,l,r,c,g=p(C,this),m=d(e),h=void 0===t,_=[],b=e;if(!g&&m&&h&&e.constructor===H)return e;if((m||p(C,e))&&(e=e.source,h&&(t=f(b))),e=void 0===e?"":u(e),t=void 0===t?"":u(t),b=e,w&&"dotAll"in M&&(s=!!t&&D(t,"s")>-1,s&&(t=$(t,/s/g,""))),a=t,L&&"sticky"in M&&(i=!!t&&D(t,"y")>-1,i&&V&&(t=$(t,/y/g,""))),k&&(l=Y(e),e=l[0],_=l[1]),r=n(S(e,t),g?this:C,H),(s||i||_.length)&&(c=v(r),s&&(c.dotAll=!0,c.raw=H(A(e),a)),i&&(c.sticky=!0),_.length&&(c.groups=_)),e!==b)try{o(r,"source",""===b?"(?:)":b)}catch(y){}return r},P=c(S),U=0;P.length>U;)m(H,S,P[U++]);C.constructor=H,H.prototype=C,h(i,"RegExp",H,{constructor:!0})}y("RegExp")},fb0e:function(e,t,a){"use strict";var s=a("bbaf"),i=a("8421").MISSED_STICKY,l=a("e0ec"),r=a("218c"),n=a("0257").get,o=RegExp.prototype,c=TypeError;s&&i&&r(o,"sticky",{configurable:!0,get:function(){if(this!==o){if("RegExp"===l(this))return!!n(this).sticky;throw new c("Incompatible receiver, RegExp required")}}})}}]);