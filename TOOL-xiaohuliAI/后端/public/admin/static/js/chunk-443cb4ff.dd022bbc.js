(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-443cb4ff"],{"05eb":function(t,e,i){},"1b19":function(t,e,i){"use strict";i("93f3")},"1dd5":function(t,e,i){"use strict";i("e145")},"52f7":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container",staticStyle:{"padding-top":"10px"}},[i("el-tabs",{on:{"tab-click":t.switchTab},model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},[i("el-tab-pane",{attrs:{label:t._f("lang")("PC版设置"),name:"web"}},[t.form?i("el-form",{ref:"webForm",staticStyle:{padding:"30px 0"},attrs:{model:t.form,rules:t.formRules,"label-width":"140px"}},[i("el-form-item",{attrs:{label:t._f("lang")("PC版站点开关"),prop:"is_open"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.form["is_open"],callback:function(e){t.$set(t.form,"is_open",e)},expression:"form['is_open']"}})],1),i("el-form-item",{attrs:{label:t._f("lang")("自动合并小程序用户"),prop:"bind_wxapp_user"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.form["bind_wxapp_user"],callback:function(e){t.$set(t.form,"bind_wxapp_user",e)},expression:"form['bind_wxapp_user']"}})],1),t.pcurl?i("el-form-item",{attrs:{label:t._f("lang")("PC站点链接")}},[i("a",{staticStyle:{color:"#409EFF"},attrs:{href:t.pcurl,target:"_blank"}},[t._v(t._s(t.pcurl))])]):t._e(),i("el-form-item",{attrs:{label:t._f("lang")("页面标题"),prop:"page_title"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{size:"small"},model:{value:t.form["page_title"],callback:function(e){t.$set(t.form,"page_title",e)},expression:"form['page_title']"}})],1),i("el-form-item",{attrs:{label:t._f("lang")("底部声明"),prop:"copyright"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:3,placeholder:t._f("lang")("请输入内容"),size:"small"},model:{value:t.form["copyright"],callback:function(e){t.$set(t.form,"copyright",e)},expression:"form['copyright']"}})],1),i("el-form-item",{attrs:{label:t._f("lang")("登录方式"),prop:"login_way"}},[t._v(" "+t._s(t._f("lang")("扫码关注公众号"))+" ")]),1===t.site_id?i("div",[i("el-form-item",{attrs:{label:t._f("lang")("SEO关键词"),prop:"keywords"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{size:"small",placeholder:t._f("lang")("每个词用英文逗号,隔开")},model:{value:t.form["keywords"],callback:function(e){t.$set(t.form,"keywords",e)},expression:"form['keywords']"}})],1),i("el-form-item",{attrs:{label:t._f("lang")("SEO描述"),prop:"description"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:3,placeholder:t._f("lang")("请输入内容"),size:"small"},model:{value:t.form["description"],callback:function(e){t.$set(t.form,"description",e)},expression:"form['description']"}})],1),i("el-form-item",{attrs:{label:t._f("lang")("JS统计代码"),prop:"tongji"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:3,placeholder:t._f("lang")("请输入js统计代码"),size:"small"},model:{value:t.form["tongji"],callback:function(e){t.$set(t.form,"tongji",e)},expression:"form['tongji']"}})],1)],1):t._e(),i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:function(e){return t.doSubmit("webForm")}}},[t._v(t._s(t._f("lang")("保 存")))])],1)],1):t._e()],1),i("el-tab-pane",{attrs:{label:t._f("lang")("风格选择"),name:"skin"}},[i("div",{staticClass:"skin-list"},[t._l(t.skinList,(function(e){return i("div",{staticClass:"item",class:{active:t.form.skin===e.name},on:{click:function(i){return t.pickSkin(e.name)}}},[i("img",{attrs:{src:e.thumb}}),i("div",{staticClass:"title"},[t._v(t._s(e.title))])])})),i("div",{staticStyle:{clear:"both"}})],2),i("div",{staticStyle:{display:"flex","align-items":"center","padding-left":"20px","margin-bottom":"40px"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:function(e){return t.doSubmit("webForm")}}},[t._v(t._s(t._f("lang")("确 定")))]),i("a",{staticClass:"text-primary",staticStyle:{"margin-left":"50px","font-size":"13px"},attrs:{href:"https://console.ttk.ink/api.php/link/ai/name/skin",target:"_blank"}},[i("i",{staticClass:"el-icon-link"}),t._v(" 自定义皮肤制作教程 ")])],1)]),i("el-tab-pane",{attrs:{label:t._f("lang")("自定义导航"),name:"menus"}},[t.systemMenus?i("menus",{attrs:{"system-menus":t.systemMenus,"my-menus":t.form.menus?t.form.menus:t.systemMenus},on:{submit:t.submitMenus}}):t._e()],1)],1)],1)},n=[],a=(i("f17d"),i("90e7")),l=i("c24f"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.myMenus&&t.myMenus.length>0?i("div",{staticClass:"nav-container"},[i("div",{staticClass:"nav-list"},[t._l(t.myMenus,(function(e,s){return i("div",{staticClass:"nav-row",class:{active:t.activeIndex===s},on:{click:function(e){t.activeIndex=s}}},[i("div",{staticClass:"nav-item",class:{hidden:!e.is_show}},[e.is_more?i("div",{staticStyle:{width:"40px",height:"40px","min-width":"40px"}}):t._e(),e.icon?i("div",{staticClass:"icon"},[-1===e.icon.indexOf("http")?i("svg-icon",{attrs:{"icon-class":"nav_"+e.icon}}):i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.icon}})],1):t._e(),i("span",[t._v(t._s(e.is_more?e.title:e.short_title))])]),"more"!==e.type?i("div",{staticClass:"btn-move"},[i("el-button-group",[i("el-button",{staticClass:"btn",attrs:{type:"text",size:"mini",icon:"el-icon-top",disabled:0===s,title:"上移"},on:{click:function(e){return e.stopPropagation(),t.moveUp(s)}}},[t._v("上移")]),i("el-button",{staticClass:"btn",attrs:{type:"text",size:"mini",icon:"el-icon-bottom",disabled:s===t.myMenus.length-1,title:"下移"},on:{click:function(e){return e.stopPropagation(),t.moveDown(s)}}},[t._v("下移")])],1)],1):t._e()])})),i("div",{staticClass:"nav-row",class:{active:-1===t.activeIndex},on:{click:t.clickAdd}},[t._m(0)])],2),t.activeIndex>-1?i("div",{staticClass:"nav-form"},[i("el-form",{ref:"form",attrs:{model:t.myMenus[t.activeIndex],rules:t.formRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"是否显示",prop:"is_show"}},[i("div",{staticStyle:{height:"42px",display:"flex","align-items":"center","justify-content":"space-between"}},[i("el-radio-group",{model:{value:t.myMenus[t.activeIndex].is_show,callback:function(e){t.$set(t.myMenus[t.activeIndex],"is_show",e)},expression:"myMenus[activeIndex].is_show"}},[i("el-radio",{staticStyle:{"margin-right":"20px"},attrs:{label:1,size:"mini"}},[t._v("显示")]),i("el-radio",{attrs:{label:0,size:"mini"}},[t._v("隐藏")])],1),i("div",{staticClass:"btn-remove"},["diy"===t.myMenus[t.activeIndex].type?i("el-button",{staticClass:"btn text-danger",attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.stopPropagation(),t.doRemove(e)}}},[t._v("删除")]):i("el-button",{staticClass:"btn text-primary",attrs:{type:"text",size:"mini",icon:"el-icon-refresh-left"},on:{click:function(e){return e.stopPropagation(),t.doReset(e)}}},[t._v("恢复默认")])],1)],1)]),"more"!==t.myMenus[t.activeIndex].type?i("el-form-item",{attrs:{label:"模块标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"此标题在“更多”里展示",size:"small"},model:{value:t.myMenus[t.activeIndex].title,callback:function(e){t.$set(t.myMenus[t.activeIndex],"title",e)},expression:"myMenus[activeIndex].title"}})],1):t._e(),i("el-form-item",{attrs:{label:"短标题",prop:"short_title"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"最多3个汉字",size:"small"},model:{value:t.myMenus[t.activeIndex].short_title,callback:function(e){t.$set(t.myMenus[t.activeIndex],"short_title",e)},expression:"myMenus[activeIndex].short_title"}})],1),i("el-form-item",{attrs:{label:"简短介绍",prop:"desc"}},[i("el-input",{attrs:{placeholder:"一句话描述模块功能",size:"small"},model:{value:t.myMenus[t.activeIndex].desc,callback:function(e){t.$set(t.myMenus[t.activeIndex],"desc",e)},expression:"myMenus[activeIndex].desc"}})],1),"diy"===t.myMenus[t.activeIndex].type?i("el-form-item",{attrs:{label:"跳转链接",prop:"link"}},[i("el-input",{attrs:{placeholder:"http://或https://",size:"small"},model:{value:t.myMenus[t.activeIndex].link,callback:function(e){t.$set(t.myMenus[t.activeIndex],"link",e)},expression:"myMenus[activeIndex].link"}})],1):t._e(),i("el-form-item",{attrs:{label:"图标",prop:"icon"}},[t.myMenus[t.activeIndex].icon?i("div",{staticStyle:{"font-size":"48px",width:"48px",height:"48px",color:"#72787e"}},[-1===t.myMenus[t.activeIndex].icon.indexOf("http")?i("svg-icon",{staticClass:"icon",attrs:{"icon-class":"nav_"+t.myMenus[t.activeIndex].icon}}):i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.myMenus[t.activeIndex].icon}})],1):t._e(),i("el-upload",{staticStyle:{"text-align":"center",width:"48px"},attrs:{action:"",data:{type:"icon"},"before-upload":t.uploadCheck,"http-request":t.uploadImage,"show-file-list":!1,multiple:!1}},[i("a",{staticClass:"text-primary"},[t._v("更换")])]),i("p",{staticStyle:{"font-size":"12px",color:"#999","line-height":"32px",margin:"0"}},[t._v("支持jpg/png/gif/svg，建议48x48，正方形图片")])],1)],1)],1):i("div",{staticClass:"nav-form"},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"是否显示",prop:"is_show"}},[i("el-radio-group",{model:{value:t.form.is_show,callback:function(e){t.$set(t.form,"is_show",e)},expression:"form.is_show"}},[i("el-radio",{staticStyle:{"margin-right":"20px"},attrs:{label:1,size:"mini"}},[t._v("显示")]),i("el-radio",{attrs:{label:0,size:"mini"}},[t._v("隐藏")])],1)],1),i("el-form-item",{attrs:{label:"模块标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"此标题仅在“更多”里展示",size:"small"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"短标题",prop:"short_title"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"最多3个汉字",size:"small"},model:{value:t.form.short_title,callback:function(e){t.$set(t.form,"short_title",e)},expression:"form.short_title"}})],1),i("el-form-item",{attrs:{label:"图标",prop:"icon"}},[t.form.icon?i("div",{staticStyle:{"font-size":"48px",width:"48px",height:"48px",color:"#72787e"}},[-1===t.form.icon.indexOf("http")?i("svg-icon",{staticClass:"icon",attrs:{"icon-class":"nav_"+t.form.icon}}):i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.form.icon}})],1):t._e(),i("el-upload",{staticStyle:{"text-align":"center",width:"48px"},attrs:{action:"",data:{type:"icon"},"before-upload":t.uploadCheck,"http-request":t.uploadImage,"show-file-list":!1,multiple:!1}},[i("a",{staticClass:"text-primary"},[t._v("更换")])]),i("p",{staticStyle:{"font-size":"12px",color:"#999","line-height":"32px",margin:"0"}},[t._v("支持jpg/png/gif/svg，建议48x48，正方形图片")])],1),i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addSubmit}},[t._v(t._s(t._f("lang")("确定添加")))])],1)],1)],1)]):t._e(),i("div",{staticClass:"toolbar"},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-check"},on:{click:t.submitAll}},[t._v("全部保存")]),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text",size:"small"},on:{click:t.resetAll}},[t._v("全部恢复默认")])],1)])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-item text-primary",staticStyle:{cursor:"pointer"}},[i("div",{staticStyle:{width:"40px",height:"40px"}}),i("i",{staticClass:"icon el-icon-plus"}),i("span",[t._v("添加一个")])])}],c=(i("233b"),i("c565"),i("b5aa"),i("c9c8"),i("91b6")),m={props:{systemMenus:{type:Array,default:function(){return[]}},myMenus:{type:Array,default:function(){return[]}}},data:function(){return{activeIndex:0,form:{},formRules:{title:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],short_title:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],is_show:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],icon:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}]}}},methods:{moveUp:function(t){var e=this.myMenus.splice(t,1)[0];"more"===this.myMenus[t-1].type&&(e.is_more=0),this.myMenus.splice(t-1,0,e),this.activeIndex===t&&(this.activeIndex=t-1)},moveDown:function(t){var e=this.myMenus.splice(t+1,1)[0];"more"===e.type&&(this.myMenus[t].is_more=1),this.myMenus.splice(t,0,e),this.activeIndex===t&&(this.activeIndex=t+1)},uploadCheck:function(t){var e="",i=t.name.split(".");if(i.length>1&&(e=i[i.length-1].toLowerCase()),!["png","jpg","jpeg","gif","svg"].includes(e))return this.$message.error("不支持的图片格式"),!1},uploadImage:function(t){var e=this,i=new FormData;i.append("file",t.file),t.data&&i.append("data",JSON.stringify(t.data)),Object(c["a"])(i).then((function(t){e.activeIndex>-1?e.$set(e.myMenus[e.activeIndex],t.data.type,t.data.path):e.$set(e.form,t.data.type,t.data.path),e.$message.success(e.$lang("上传成功"))}))},clickAdd:function(){this.form={type:"diy",title:"",short_title:"",icon:"ic_mod_diy",link:"",is_show:1,is_more:1},this.activeIndex=-1},addSubmit:function(){this.myMenus.push(this.form),this.clickAdd()},doRemove:function(){var t=this;-1!==this.activeIndex&&this.$confirm("确定删除吗?","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then((function(){t.myMenus.splice(t.activeIndex,1),t.activeIndex===t.myMenus.length&&(t.activeIndex=t.myMenus.length-1)}))},doReset:function(){var t=this;this.$confirm("确定恢复默认吗?","提示",{confirmButtonText:"确定恢复",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.myMenus[t.activeIndex].type;for(var i in t.systemMenus)if(t.systemMenus[i].type===e){t.myMenus[t.activeIndex].icon=t.systemMenus[i].icon,t.myMenus[t.activeIndex].is_show=t.systemMenus[i].is_show,t.myMenus[t.activeIndex].title=t.systemMenus[i].title,t.myMenus[t.activeIndex].short_title=t.systemMenus[i].short_title;break}}))},submitAll:function(){this.$emit("submit",this.myMenus)},resetAll:function(){var t=this;this.$confirm("确认将当前导航设置恢复到系统默认吗?","提示",{confirmButtonText:"确定恢复",cancelButtonText:"取消",type:"warning"}).then((function(){t.myMenus=t.systemMenus}))}}},u=m,p=(i("1dd5"),i("76b2")),d=Object(p["a"])(u,r,o,!1,null,"5440a8f8",null),f=d.exports,h={components:{menus:f},data:function(){return{tabName:"web",form:null,pcurl:"",skinList:[],systemMenus:null,formRules:{title:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],appid:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],appsecret:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],token:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],aes_key:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],page_title:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],share_title:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],share_desc:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}],share_image:[{required:!0,message:this.$lang("此项必填"),trigger:"blur"}]}}},computed:{site_id:function(){return this.$store.getters.site_id}},mounted:function(){this.getSetting(),this.getWebSiteUrl()},methods:{getSetting:function(){var t=this;Object(a["a"])({name:"web"}).then((function(e){t.form=e.data,t.form.skin||(t.form.skin="default")}))},getSkinList:function(){var t=this;Object(a["b"])({platform:"web"}).then((function(e){t.skinList=e.data}))},getWebSiteUrl:function(){var t=this;Object(l["m"])().then((function(e){t.pcurl=e.data.pcurl}))},switchTab:function(){"web"===this.tabName?this.getSetting():"skin"===this.tabName?this.getSkinList():"menus"===this.tabName&&this.getSystemMenus()},doSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?Object(a["d"])({name:"web",data:JSON.stringify(e.form)}).then((function(t){e.getSetting(),e.$message.success(t.message)})):e.$message.error(e.$lang("请填写必填项"))}))},pickSkin:function(t){this.form.skin=t,this.$forceUpdate()},getSystemMenus:function(){var t=this;Object(a["c"])({platform:"pc"}).then((function(e){t.systemMenus=e.data}))},submitMenus:function(t){var e=this;t||(t=this.systemMenus),this.form.menus=t,Object(a["d"])({name:"web",data:JSON.stringify(this.form)}).then((function(t){e.$message.success(t.message)}))}}},g=h,v=(i("bd42"),i("1b19"),Object(p["a"])(g,s,n,!1,null,"eb8478ac",null));e["default"]=v.exports},"90e7":function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"d",(function(){return a})),i.d(e,"b",(function(){return l})),i.d(e,"c",(function(){return r}));var s=i("b775");function n(t){return Object(s["a"])({url:"/setting/getSetting",method:"post",data:t})}function a(t){return Object(s["a"])({url:"/setting/setSetting",method:"post",data:t})}function l(t){return Object(s["a"])({url:"/setting/getSkinList",method:"post",data:t})}function r(t){return Object(s["a"])({url:"/setting/getSystemMenus",method:"post",data:t})}},"91b6":function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return a}));var s=i("b775");function n(t){return Object(s["a"])({url:"/upload/image",method:"post",data:t})}function a(t){return Object(s["a"])({url:"/upload/pem",method:"post",data:t})}},"93f3":function(t,e,i){},bd42:function(t,e,i){"use strict";i("05eb")},e145:function(t,e,i){}}]);