(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c90f09a8"],{"1d4a":function(t,i,s){},2850:function(t,i,s){"use strict";s("1d4a")},"62c6":function(t,i,s){"use strict";s("97ff")},6997:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"module-draw"},[t.drawSetting["channel"]?s("div",{staticClass:"sub-sidebar"},[s("div",{staticClass:"module-body"},["yijian"===t.drawSetting["channel"]?s("drawYijian",{ref:"drawSetting",attrs:{settings:t.drawSetting["options"]}}):t._e(),"mj"===t.drawSetting["platform"]?s("drawMj",{ref:"drawSetting"}):t._e(),"openai"===t.drawSetting["platform"]?s("drawOpenai",{ref:"drawSetting"}):t._e()],1),s("div",{staticClass:"module-footer"},[t.priceSetting.draw>0?s("div",{staticClass:"box-price",on:{click:t.showPay}},[s("svg-icon",{staticClass:"icon",attrs:{"icon-class":"ic_mod_draw"}}),s("span",{staticClass:"num"},[t._v(t._s(t.priceSetting.draw))]),t._v(t._s(t.priceSetting.title)+"/"+t._s(t._f("lang")("次"))+" "),t.priceSetting.draw_vip?s("span",{staticClass:"vip"},[t._v("会员免费")]):t._e()],1):s("div",{staticClass:"box-price",staticStyle:{cursor:"default"}},[s("svg-icon",{staticClass:"icon",attrs:{"icon-class":"ic_mod_draw"}}),s("span",{staticClass:"vip"},[t._v("免费使用")])],1),s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("el-select",{staticClass:"cate",staticStyle:{"margin-right":"20px",width:"180px"},attrs:{placeholder:"请选择图片分类",size:"normal"},model:{value:t.cate_id,callback:function(i){t.cate_id=i},expression:"cate_id"}},t._l(t.drawCate,(function(t){return s("el-option",{attrs:{label:t.title,value:t.id}})})),1),s("el-checkbox",{attrs:{label:"共享到图库"},model:{value:t.is_share,callback:function(i){t.is_share=i},expression:"is_share"}})],1),s("el-button",{staticClass:"btn-draw",attrs:{type:"primary"},on:{click:t.submitTask}},[s("i",{staticClass:"el-icon-position"}),t._v(" 开始生成图片 ")])],1)]):t._e(),s("div",{staticClass:"main-wrapper box-chat"},[t.lists&&t.lists.length>0?s("div",{staticClass:"chat-msg style-write",staticStyle:{bottom:"0"}},[s("el-scrollbar",{ref:"msglist",attrs:{"wrap-class":"scrollbar-wrapper"}},[s("div",{staticClass:"msg-list",staticStyle:{"padding-top":"0",width:"658px"}},t._l(t.lists,(function(i){return s("div",{staticClass:"msg-row"},[s("div",{staticClass:"msg-item row-user",staticStyle:{padding:"25px 30px 15px 30px"}},[s("div",{staticClass:"avatar",staticStyle:{background:"#9aa37e"}},[s("img",{attrs:{src:t.userAvatar,alt:""}})]),s("div",{staticClass:"text markdown-body",staticStyle:{"padding-top":"3px"}},[t._v(" "+t._s(i.message)+" "),s("div",{staticClass:"tools",staticStyle:{opacity:"1","margin-top":"10px !important"}},[s("span",{staticClass:"btn text-primary",attrs:{title:"将参数填充到左侧面板"},on:{click:function(s){return t.replayOptions(i.draw_id)}}},[s("svg-icon",{staticClass:"icon",attrs:{"icon-class":"ic_copy"}}),t._v(t._s(t._f("lang")("复用参数")))],1),s("span",{staticStyle:{"font-size":"13px",color:"#898989"}},[t._v(t._s(i.create_time))])])])]),s("div",{staticClass:"msg-item row-ai",staticStyle:{padding:"15px 30px 20px 30px"}},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:t.aiAvatar,alt:""}})]),s("div",{staticClass:"text markdown-body"},[s("imageComponent",{attrs:{item:i},on:{retry:t.retryDraw,mjCtrl:t.mjCtrl}})],1)]),s("div",{staticStyle:{clear:"both"}})])})),0)])],1):s("welcome")],1)])},a=[],n=s("e089"),o=(s("f17d"),s("c9c8"),s("a7fa"),s("d3da"),s("6db4")),r=s("c24f"),c=s("b775");function l(t){return Object(c["a"])({url:"/draw/draw",method:"post",data:t})}function d(t){return Object(c["a"])({url:"/draw/mjCtrl",method:"post",data:t})}function p(t){return Object(c["a"])({url:"/draw/getDrawSetting",method:"post",data:t})}function u(t){return Object(c["a"])({url:"/draw/getDrawOptions",method:"post",data:t})}function h(t){return Object(c["a"])({url:"/draw/getHistoryMsg",method:"post",data:t})}function v(t){return Object(c["a"])({url:"/draw/getDrawResult",method:"post",hideLoading:!0,data:t})}function m(t){return Object(c["a"])({url:"/draw/getWordsCate",method:"post",hideLoading:!0,data:t})}function f(t){return Object(c["a"])({url:"/draw/getWordsList",method:"post",data:t})}function g(t){return Object(c["a"])({url:"/draw/getDrawCate",method:"post",data:t})}var w=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[s("div",{staticClass:"box-setting"},[s("div",{staticClass:"setting-row"},[s("prompt",{ref:"prompt",staticStyle:{width:"100%"},attrs:{type:"mj"}})],1),s("div",{staticClass:"setting-row"},[s("div",{staticClass:"setting-item col-1"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("参考图片")))]),s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("el-tooltip",{attrs:{effect:"dark",content:"设置参考图，尺寸限1500x1500像素以内",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1)]),s("div",{staticClass:"options"},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":t.uploadImage,"show-file-list":!1,multiple:!1,title:"点击上传图片"}},[t.options.image?s("div",{staticClass:"image"},[s("img",{attrs:{src:t.options.image}}),s("span",{staticClass:"del",attrs:{title:"移除图片"},on:{click:function(i){return i.stopPropagation(),t.removeImage(i)}}},[s("i",{staticClass:"el-icon-close"})])]):s("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"80px",height:"80px","line-height":"80px"}})]),s("div",{staticStyle:{clear:"both"}})],1)]),s("div",{staticClass:"setting-item col-3"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("画布比例")))]),s("el-tooltip",{attrs:{effect:"dark",content:"指定生成图像的宽高比",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options",staticStyle:{display:"flex","justify-content":"space-around"}},[t._l(t.sizes,(function(i){return s("div",{staticClass:"size-item",class:{active:t.options.ar===i.width+":"+i.height},on:{click:function(s){return t.setSize(i.width,i.height)}}},[i.width>=i.height?s("div",{staticClass:"size-block",style:"width: 36px; height: "+parseInt(i.height/i.width*36)+"px;"}):s("div",{staticClass:"size-block",style:"height: 36px; width: "+parseInt(i.width/i.height*36)+"px;"}),s("span",[t._v(t._s(i.title))])])})),s("div",{staticStyle:{clear:"both"}})],2)])]),s("div",{staticClass:"setting-row"},[s("div",{staticClass:"setting-item col-2"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("参考图权重 --iw")))]),s("el-tooltip",{attrs:{effect:"dark",content:"设置生成图片时垫图的权重，值越大越像垫图，取值范围0.5-2， 默认值1",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options"},[s("div",{staticStyle:{"padding-bottom":"10px"}},[s("el-slider",{attrs:{min:t.iw.min,max:t.iw.max,marks:t.iw.marks,"format-tooltip":t.divide10},model:{value:t.options.iw,callback:function(i){t.$set(t.options,"iw",i)},expression:"options.iw"}})],1),s("div",{staticStyle:{clear:"both"}})])]),s("div",{staticClass:"setting-item col-2"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("图片质量 --q")))]),s("el-tooltip",{attrs:{effect:"dark",content:t.q.explain,placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options"},[s("div",{staticStyle:{"padding-bottom":"10px"}},[s("el-slider",{attrs:{min:t.q.min,max:t.q.max,marks:t.q.marks,"format-tooltip":t.divide10},model:{value:t.options.q,callback:function(i){t.$set(t.options,"q",i)},expression:"options.q"}})],1),s("div",{staticStyle:{clear:"both"}})])])]),s("div",{staticClass:"setting-row"},[s("div",{staticClass:"setting-item col-2"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("风格化值 --s")))]),s("el-tooltip",{attrs:{effect:"dark",content:t.s.explain,placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options"},[s("div",{staticStyle:{"padding-bottom":"10px"}},[s("el-slider",{attrs:{min:t.s.min,max:t.s.max,marks:t.s.marks},model:{value:t.options.s,callback:function(i){t.$set(t.options,"s",i)},expression:"options.s"}})],1),s("div",{staticStyle:{clear:"both"}})])]),s("div",{staticClass:"setting-item col-2"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("混乱值 --c")))]),s("el-tooltip",{attrs:{effect:"dark",content:t.c.explain,placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options"},[s("div",[s("el-slider",{attrs:{min:t.c.min,max:t.c.max},model:{value:t.options.c,callback:function(i){t.$set(t.options,"c",i)},expression:"options.c"}})],1),s("div",{staticStyle:{clear:"both"}})])])]),s("div",{staticClass:"setting-row"},[s("div",{staticClass:"setting-item col-2"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("排除内容 --no")))]),s("el-tooltip",{attrs:{effect:"dark",content:"指定图片内要排除的生成内容",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options"},[s("el-input",{staticStyle:{width:"320px"},attrs:{type:"text",placeholder:t._f("lang")("请输入排除的内容"),size:"normal"},model:{value:t.options.no,callback:function(i){t.$set(t.options,"no",i)},expression:"options.no"}}),s("div",{staticStyle:{clear:"both"}})],1)]),s("div",{staticClass:"setting-item col-2"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("种子 --seed")))]),s("el-tooltip",{attrs:{effect:"dark",content:"种子用于指定生成效果，可以用于生成套图，保障生成的一系列图片保持同一种风格",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options"},[s("el-input",{staticStyle:{width:"320px"},attrs:{type:"text",placeholder:t._f("lang")("请输seed种子编号"),size:"normal"},model:{value:t.options.seed,callback:function(i){t.$set(t.options,"seed",i)},expression:"options.seed"}}),s("div",{staticStyle:{clear:"both"}})],1)])]),s("div",{staticClass:"setting-row"},[s("div",{staticClass:"setting-item col-2"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("MJ渲染模型 --v")))]),s("el-tooltip",{attrs:{effect:"dark",content:"指定midjourney的渲染模型",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options"},[s("el-radio-group",{attrs:{size:"small"},model:{value:t.options.v,callback:function(i){t.$set(t.options,"v",i)},expression:"options.v"}},[s("el-radio-button",{attrs:{label:""}},[t._v("默认")]),s("el-radio-button",{attrs:{label:"6.0"}},[t._v("v6")]),s("el-radio-button",{attrs:{label:"5.2"}},[t._v("v5.2")]),s("el-radio-button",{attrs:{label:"5.1"}},[t._v("v5.1")]),s("el-radio-button",{attrs:{label:"5"}},[t._v("v5")])],1)],1)]),s("div",{staticClass:"setting-item col-2"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("niji渲染模型 --niji")))]),s("el-tooltip",{attrs:{effect:"dark",content:"niji是动漫模型",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options"},[s("el-radio-group",{attrs:{size:"small"},model:{value:t.options.niji,callback:function(i){t.$set(t.options,"niji",i)},expression:"options.niji"}},[s("el-radio-button",{attrs:{label:""}},[t._v("默认")]),s("el-radio-button",{attrs:{label:"6"}},[t._v("niji6模型")]),s("el-radio-button",{attrs:{label:"5"}},[t._v("niji5模型")]),s("el-radio-button",{attrs:{label:"4"}},[t._v("niji4模型")])],1)],1)])]),s("div",{staticClass:"setting-row"},[s("div",{staticClass:"setting-item col-2"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("风格 --style")))]),s("el-tooltip",{attrs:{effect:"dark",content:"指定midjourney的风格，一般用于设置niji风格",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options"},[s("el-radio-group",{attrs:{size:"small"},model:{value:t.options.style,callback:function(i){t.$set(t.options,"style",i)},expression:"options.style"}},[s("el-radio-button",{attrs:{label:""}},[t._v("默认")]),""===t.options.v&&"5"===t.options.niji?s("el-radio-button",{attrs:{label:"expressive"}},[t._v("expressive-3d")]):t._e(),""===t.options.v&&"5"===t.options.niji?s("el-radio-button",{attrs:{label:"cute"}},[t._v("cute-可爱")]):t._e(),["","5.1","5.2","6.0"].includes(t.options.v)&&["","6"].includes(t.options.niji)?s("el-radio-button",{attrs:{label:"raw"}},[t._v("raw")]):t._e()],1)],1)]),s("div",{staticClass:"setting-item col-2"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("拼贴图模式 --tile")))]),s("el-tooltip",{attrs:{effect:"dark",content:"用于生成无限拼贴图",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options"},[s("el-radio-group",{attrs:{size:"small"},model:{value:t.options.tile,callback:function(i){t.$set(t.options,"tile",i)},expression:"options.tile"}},[s("el-radio-button",{attrs:{label:0}},[t._v("不开启")]),s("el-radio-button",{attrs:{label:1}},[t._v("开启")])],1)],1)])])])])},_=[],b=(s("390d"),function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("div",{staticClass:"setting-item box-prompt"},[s("div",{staticClass:"header",staticStyle:{"margin-top":"10px"}},[s("span",[t._v("✳ "+t._s(t._f("lang")("画面描述")))]),s("el-button",{attrs:{type:"default",size:"mini"},on:{click:t.clearPicked}},[t._v("重置")])],1),t.wordsCate.length>0?s("div",{staticClass:"words-cate"},[t._l(t.wordsCate,(function(i,e){return s("div",{staticClass:"item",on:{click:function(s){return t.showWordsPicker(e,i.id)}}},[s("span",[t._v(t._s(i.title))]),t.pickedCount(i.id)>0?s("span",{staticClass:"count"},[t._v(t._s(t.pickedCount(i.id)))]):t._e()])})),s("div",{staticStyle:{clear:"both"}})],2):t._e(),s("div",{staticClass:"words-input"},[s("el-input",{ref:"messageInput",attrs:{placeholder:t._f("lang")("输入自定义画面描述"),type:"textarea",autofocus:!0,autosize:{minRows:2,maxRows:8},maxlength:"1000"},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.onEnter(i)}},model:{value:t.wordInput,callback:function(i){t.wordInput=i},expression:"wordInput"}}),s("el-button",{staticClass:"btn-add",attrs:{type:"primary",plain:"",size:"small"},on:{click:t.addToPicked}},[s("i",{staticClass:"el-icon-bottom"}),t._v(" 添加到描述 ")])],1),t.wordsPicked&&t.wordsPicked.length>0?s("div",{staticClass:"words-list"},[t._l(t.wordsPicked,(function(i,e){return s("el-tag",{key:e,staticClass:"item",attrs:{type:"primary",size:"large",closable:"","disable-transitions":!1},on:{close:function(i){return t.removePicked(e)}}},["mj"===t.type?s("span",{staticClass:"weight",attrs:{title:"比重: "+i.weight},on:{click:function(i){return t.showWordWeight(e)}}},[t._v(t._s(i.weight))]):t._e(),t._v(" "+t._s(i.text.length>20?i.text.substr(0,20)+"...":i.text)+" ")])})),s("div",{staticStyle:{clear:"both"}})],2):t._e(),s("div",{staticStyle:{height:"1px",clear:"both"}})]),t.activeWord?s("div",[s("el-dialog",{attrs:{"custom-class":"my-dialog",title:t._f("lang")("调整比重"),width:"400px",visible:!0,"close-on-click-modal":!0,"append-to-body":!0,"before-close":t.closeWordWeight}},[s("el-alert",{attrs:{type:"info","show-icon":"",closable:!1,title:"比重取值范围1-20，默认1"}}),s("div",{staticStyle:{padding:"30px 10px 20px 15px"}},[s("el-slider",{attrs:{min:1,max:20,"show-input":""},model:{value:t.activeWord.weight,callback:function(i){t.$set(t.activeWord,"weight",i)},expression:"activeWord.weight"}})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:t.closeWordWeight}},[t._v(t._s(t._f("lang")("取 消")))]),s("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:t.setWordWeight}},[t._v(t._s(t._f("lang")("确 定")))])],1)],1)],1):t._e(),s("words-picker",{attrs:{"pcate-index":t.wordsPickerActivePcateIndex,cates:t.wordsCate,picked:t.wordsPicked},on:{close:t.closeWordsPicker,picker:t.setWords,getWordsList:t.getWordsList,setWords:t.setWords}})],1)}),y=[],C=(s("233b"),function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{},[s("el-drawer",{attrs:{title:"",direction:"rtl",size:"calc(100% - 440px)",visible:t.activePcateId>0,"close-on-click-modal":!0,"append-to-body":!0,"before-close":t.closeWordsPicker}},[s("div",{staticClass:"words-picker-container"},[s("div",{ref:"pcateList",staticClass:"pcate-list"},t._l(t.cates,(function(i,e){return s("el-button",{staticClass:"item",class:{active:e===t.activePcateIndex},attrs:{type:"primary",plain:e!==t.activePcateIndex,size:"normal"},on:{click:function(s){return t.changePcate(e,i.id)}}},[s("span",[t._v(t._s(i.title))]),t.pickedCount("pcate",i.id)>0?s("span",{staticClass:"count"},[t._v(t._s(t.pickedCount("pcate",i.id)))]):t._e()])})),1),s("div",{ref:"scateList",staticClass:"scate-list"},[t._l(t.scateList,(function(i,e){return s("div",{staticClass:"item",class:{active:e===t.activeScateIndex},attrs:{type:"default",plain:"",size:"normal"},on:{click:function(s){return t.changeScate(e,i.id)}}},[s("span",[t._v(t._s(i.title))]),t.pickedCount("scate",i.id)>0?s("span",{staticClass:"count"},[t._v(t._s(t.pickedCount("scate",i.id)))]):t._e()])})),s("div",{staticStyle:{clear:"both"}})],2),t.wordsList?s("div",{ref:"wordsList",staticClass:"words-list",style:"top: "+t.wordsListTop+"px; bottom: "+t.wordsListBottom+"px;"},[t._l(t.wordsList,(function(i,e){return s("div",{staticClass:"item",class:{active:t.pickedIds.includes(i.id)},on:{click:function(s){return t.pickWord(i)}}},[t._v(t._s(i.title))])})),s("div",{staticStyle:{clear:"both"}})],2):t._e(),s("div",{staticClass:"picker-footer"},[t.wordsPicked&&t.wordsPicked.length>0?s("div",{ref:"wordsPicked",staticClass:"words-picked"},t._l(t.wordsPicked,(function(i,e){return s("el-tag",{key:e,staticClass:"item",attrs:{type:"primary",size:"large",closable:"","disable-transitions":!1},on:{close:function(i){return t.delWord(e)}}},[t._v(" "+t._s(i.text.length>20?i.text.substr(0,20)+"...":i.text)+" ")])})),1):t._e(),s("div",{staticClass:"footer"},[s("el-button",{attrs:{type:"default",size:"normal"},on:{click:t.closeWordsPicker}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary",size:"normal"},on:{click:t.setWords}},[t._v("确 定")])],1)])])])],1)}),x=[],k=(s("51c1"),s("b5aa"),s("13c8"),{props:{cates:{type:Array,default:function(){return[]}},picked:{type:Array,default:function(){return[]}},pcateIndex:{type:Number,default:0}},data:function(){return{wordsList:[],wordsCount:0,wordsPicked:[],pickedIds:[],activePcateIndex:-1,activePcateId:0,activeScateIndex:-1,activeScateId:0,wordsListTop:0,wordsListBottom:0}},computed:{scateList:function(){return this.activePcateIndex>=0?this.cates[this.activePcateIndex].children:[]}},watch:{cates:{handler:function(){this.makeWordsList()},deep:!0,immediate:!0},pcateIndex:{handler:function(){this.pcateIndex>=0?this.changePcate(this.pcateIndex,this.cates[this.pcateIndex].id):(this.activePcateIndex=-1,this.activePcateId=0,this.wordsList=[],this.wordsCount=0),this.wordsPicked=JSON.parse(JSON.stringify(this.picked)),this.calcPickedIds(),this.calcWordsListBottom()},immediate:!0}},created:function(){},methods:{getWordsList:function(){this.cates[this.activePcateIndex].wordsList||this.$emit("getWordsList",this.activePcateIndex,this.activePcateId)},makeWordsList:function(){var t=this;if(!(this.activePcateIndex<0)){var i=[],s=this.cates[this.activePcateIndex]["wordsList"];s?(this.activeScateId?s.forEach((function(s,e){s.scate===t.activeScateId&&i.push(s)})):i=s,this.wordsList=i,this.wordsCount=i.length,this.calcWordsListTop()):this.getWordsList()}},changePcate:function(t,i){this.activePcateIndex=t,this.activePcateId=i,this.cates[this.activePcateIndex].children.length>0?(this.activeScateIndex=0,this.activeScateId=this.cates[this.activePcateIndex].children[0].id):(this.activeScateIndex=-1,this.activeScateId=0),this.makeWordsList()},changeScate:function(t,i){this.activeScateIndex=t,this.activeScateId=i,this.makeWordsList()},closeWordsPicker:function(t){this.$emit("close")},setWords:function(){this.$emit("setWords",this.wordsPicked)},pickWord:function(t){if(this.pickedIds.includes(t.id)){for(var i=0;i<this.wordsPicked.length;i++)if(this.wordsPicked[i].id===t.id){this.wordsPicked.splice(i,1);break}}else this.wordsPicked.push({id:t.id,pcate:t.pcate,scate:t.scate,text:t.title,weight:1});this.calcPickedIds(),this.calcWordsListTop(),this.calcWordsListBottom()},delWord:function(t){var i=this;this.wordsPicked.splice(t,1),this.calcPickedIds(),setTimeout((function(){i.calcWordsListTop(),i.calcWordsListBottom()}),200)},calcWordsListTop:function(){var t=this;this.$nextTick((function(){t.wordsListTop=t.$refs.pcateList.offsetHeight+t.$refs.scateList.offsetHeight+20}))},calcWordsListBottom:function(){var t=this;this.$nextTick((function(){t.wordsListBottom=80,t.$refs.wordsPicked&&(t.wordsListBottom+=t.$refs.wordsPicked.offsetHeight)}))},pickedCount:function(t,i){var s=0;return this.wordsPicked.forEach((function(e){e[t]===i&&s++})),s},calcPickedIds:function(){var t=[];this.wordsPicked.forEach((function(i){i.id&&t.push(i.id)})),this.pickedIds=t}}}),S=k,P=s("76b2"),I=Object(P["a"])(S,C,x,!1,null,null,null),W=I.exports,O=s("ca00"),j={components:{wordsPicker:W},props:{type:{type:String,default:""}},data:function(){return{lists:[],wordInput:"",page:1,pagesize:10,drawSetting:{},wordsCate:[],activeWordIndex:null,activeWord:null,wordsPickerActivePcateIndex:-1,wordsPickerActivePcateId:0,wordsPicked:[]}},created:function(){this.getWordsCate()},methods:{onEnter:function(t){return t.ctrlKey&&this.addToPicked(),!1},getWordsCate:function(){var t=this;m().then((function(i){t.wordsCate=i.data}))},getWordsList:function(t,i){var s=this;f({pcate:i}).then((function(i){var e=JSON.parse(JSON.stringify(s.wordsCate));e[t].wordsList=i.data.list,e[t].wordsCount=i.data.count,s.wordsCate=e}))},addToPicked:function(){var t=Object(O["f"])(this.wordInput);t&&(this.wordsPicked.push({text:t,weight:1}),this.wordInput="")},removePicked:function(t){this.wordsPicked.splice(t,1)},clearPicked:function(){this.wordsPicked=[]},showWordsPicker:function(t,i){this.wordsPickerActivePcateIndex=t,this.wordsPickerActivePcateId=i},closeWordsPicker:function(){this.wordsPickerActivePcateIndex=-1,this.wordsPickerActivePcateId=0},setWords:function(t){this.wordsPicked=t,this.closeWordsPicker()},getWordsPicked:function(){return this.wordsPicked},showWordWeight:function(t){this.activeWordIndex=t,this.activeWord=JSON.parse(JSON.stringify(this.wordsPicked[t]))},closeWordWeight:function(){this.activeWordIndex=null,this.activeWord=null},setWordWeight:function(){this.wordsPicked[this.activeWordIndex]=this.activeWord,this.closeWordWeight()},wordWeightFormat:function(t){return"比重："+t},pickedCount:function(t){var i=0;return this.wordsPicked&&this.wordsPicked.forEach((function(s){s.pcate===t&&i++})),i}}},z=j,$=(s("bc45"),Object(P["a"])(z,b,y,!1,null,"18486c14",null)),L=$.exports,D=s("91b6"),E={components:{prompt:L},data:function(){return{defaultOptions:{ar:"1:1",iw:10,s:100,q:10,c:0,no:"",seed:"",niji:"",style:"",v:"",tile:0,image:"",words:[]},options:{},sizes:[{width:1,height:1,title:"1:1",desc:"默认值"},{width:16,height:9,title:"16:9",desc:"电脑端"},{width:9,height:16,title:"9:16",desc:"手机端"},{width:3,height:2,title:"3:2",desc:"相机"},{width:4,height:3,title:"4:3",desc:"高清"},{width:3,height:4,title:"3:4",desc:"高清"}],iw:{min:5,max:20,marks:{10:"默认1"},explain:"设置生成图片时垫图的权重，值越大越像垫图，取值范围0.5-2， 默认值1"},s:{min:0,max:1e3,marks:{100:"默认100"},explain:"设置生成图片时的风格化程度，值越大，风格化的程度越高，取值范围0-1000， 默认值100"},q:{min:3,max:50,marks:{10:"默认1"},explain:"设置图片的质量，越大质量越高，取值范围0.3-5，默认值1"},c:{min:0,max:100,explain:"本参数会控制生成4张图的差别， 值越大，生成4张图的区别越大，值越小,生成的4张图越接近，取值范围0-100， 默认值0"}}},watch:{"options.v":function(){this.$set(this.options,"style","")},"options.niji":function(){this.$set(this.options,"style","")}},created:function(){this.options=JSON.parse(JSON.stringify(this.defaultOptions))},methods:{getDrawOptions:function(){var t=JSON.parse(JSON.stringify(this.options));return t.words=this.$refs["prompt"].getWordsPicked(),t.iw&&(t.iw=this.divide10(t.iw)),t.q&&(t.q=this.divide10(t.q)),t},clearDrawOptions:function(){this.$refs.prompt.clearPicked(),this.options.image=""},setDrawOptions:function(t){t.iw&&(t.iw=10*t.iw),t.q&&(t.q=10*t.q),t=Object.assign(this.defaultOptions,t),this.options=JSON.parse(JSON.stringify(t)),t.words&&this.$refs.prompt.setWords(t.words)},divide10:function(t){return t/10},setSize:function(t,i){this.options.ar=t+":"+i},uploadImage:function(t){var i=this,s=new FormData;s.append("image",t.file),t.data&&s.append("data",JSON.stringify(t.data)),Object(D["a"])(s).then((function(t){i.options.image=t.data.path})).catch((function(t){403===t.errno&&i.$modals.showLogin()}))},removeImage:function(){this.options.image=""}}},q=E,B=(s("94dd"),Object(P["a"])(q,w,_,!1,null,"daf4bada",null)),N=B.exports,T=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[s("div",{staticClass:"box-setting"},[s("div",{staticClass:"setting-row"},[s("div",{staticClass:"setting-item",staticStyle:{"padding-bottom":"12px"}},[s("div",{staticClass:"header"},[t._v("✳ "+t._s(t._f("lang")("选择类型")))]),s("div",{staticClass:"options"},[t._l(t.settings.styleDetails,(function(i){return s("div",{staticClass:"option-item",class:{active:t.group_name===i.GroupName},staticStyle:{width:"132px",height:"80px"},on:{click:function(s){return t.switchGroup(i.GroupName)}}},[s("img",{attrs:{src:i.ShowImage,alt:i.GroupName}}),s("span",[t._v(t._s(i.GroupName))])])})),s("div",{staticStyle:{clear:"both"}})],2)])]),t.styles&&t.styles.length>0?s("div",{staticClass:"setting-row"},[s("div",{staticClass:"setting-item",staticStyle:{"padding-bottom":"12px"}},[s("div",{staticClass:"header"},[t._v("✳ "+t._s(t._f("lang")("选择风格")))]),s("div",{staticClass:"options"},[t._l(t.styles,(function(i){return s("div",{staticClass:"option-item",class:{active:t.engine===i.engine&&t.style===i.value},attrs:{title:i.text},on:{click:function(s){return t.switchEngine(i.engine,i.value)}}},[s("img",{attrs:{src:i.poster,alt:i.text}}),s("span",[t._v(t._s(i.text))])])})),s("div",{staticStyle:{clear:"both"}})],2)])]):t._e(),t.sub_styles&&t.sub_styles.length>0?s("div",{staticClass:"setting-row"},[s("div",{staticClass:"setting-item",staticStyle:{"padding-bottom":"12px"}},[s("div",{staticClass:"header"},[t._v("✳ "+t._s(t._f("lang")("选择模式")))]),s("div",{staticClass:"options"},[t._l(t.sub_styles,(function(i){return s("div",{staticClass:"option-item",class:{active:t.sub_style===i.value},attrs:{title:i.text},on:{click:function(s){return t.switchSubStyle(i.value)}}},[s("img",{attrs:{src:i.poster,alt:i.text}}),s("span",[t._v(t._s(i.text))])])})),s("div",{staticStyle:{clear:"both"}})],2)])]):t._e(),s("div",{staticClass:"setting-row"},[s("prompt",{ref:"prompt",staticStyle:{width:"100%"},attrs:{type:"yijian"}})],1),s("div",{staticClass:"setting-row"},[s("div",{staticClass:"setting-item col-1"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("参考图片")))]),s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("el-tooltip",{attrs:{effect:"dark",content:"设置参考图，尺寸限1000x1000像素以内",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1)]),s("div",{staticClass:"options"},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":t.uploadImage,"show-file-list":!1,multiple:!1,title:"点击上传图片"}},[t.image?s("div",{staticClass:"image"},[s("img",{attrs:{src:t.image}}),s("span",{staticClass:"del",attrs:{title:"移除图片"},on:{click:function(i){return i.stopPropagation(),t.removeImage(i)}}},[s("i",{staticClass:"el-icon-close"})])]):s("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"92px",height:"92px","line-height":"92px"}})]),s("div",{staticStyle:{clear:"both"}})],1)]),s("div",{staticClass:"setting-item col-3"},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("画布比例")))]),s("el-tooltip",{attrs:{effect:"dark",content:"指定生成图像的宽高比",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options",staticStyle:{display:"flex","justify-content":"space-around"}},[t._l(t.settings.imageSizes,(function(i){return s("div",{staticClass:"size-item",class:{active:t.size===i.value},attrs:{title:i.desc},on:{click:function(s){return t.switchSize(i.value)}}},[s("div",{class:"size-block size"+i.value}),s("span",[t._v(t._s(i.text))])])})),s("div",{staticStyle:{clear:"both"}})],2)])])])])},A=[],J={components:{prompt:L},props:{settings:{type:Object,default:function(){return{}}}},data:function(){return{group_name:"",style:"",engine:"",sub_style:"",styles:[],image:"",size:0}},watch:{group_name:function(){var t=this;this.settings.styleDetails.forEach((function(i){t.group_name===i.GroupName&&(t.styles=i.Styles,i.Styles.length>0?(t.engine=i.Styles[0].engine,t.style=i.Styles[0].value):(t.engine="",t.style=""))}))}},computed:{sub_styles:function(){var t=this,i=[];return this.styles.forEach((function(s){t.engine===s.engine&&t.style===s.value&&(s.sub_styles.length>0?t.sub_style=s.sub_styles[0].value:t.sub_style="",i=s.sub_styles)})),i}},created:function(){var t=this,i=[];this.settings.styleDetails.forEach((function(s,e){i.push({title:s.GroupName,poster:s.ShowImage}),0===e&&(t.group_name=s.GroupName)})),this.groups=i},methods:{switchGroup:function(t){this.group_name=t},switchEngine:function(t,i){this.engine=t,this.style=i},switchSubStyle:function(t){this.sub_style=t},switchSize:function(t){this.size=t},getDrawOptions:function(){var t={engine:this.engine,style:this.style,sub_style:this.sub_style,size:this.size,image:this.image};return t.words=this.$refs["prompt"].getWordsPicked(),t},clearDrawOptions:function(){this.$refs.prompt.clearPicked(),this.image=""},setDrawOptions:function(t){this.engine=t.engine?t.engine:"default_dreamer_diffusion",this.style=t.style?t.style:"",this.sub_style=t.sub_style?t.sub_style:"",this.size=t.size?t.size:0,this.image=t.image?t.image:"",t.words&&this.$refs.prompt.setWords(t.words)},uploadImage:function(t){var i=this,s=new FormData;s.append("image",t.file),t.data&&s.append("data",JSON.stringify(t.data)),Object(D["a"])(s).then((function(t){i.image=t.data.path})).catch((function(t){403===t.errno&&i.$modals.showLogin()}))},removeImage:function(){this.image=""}}},G=J,R=(s("7cdf"),Object(P["a"])(G,T,A,!1,null,"4e7070de",null)),H=R.exports,U=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[s("div",{staticClass:"box-setting"},[s("div",{staticClass:"setting-row"},[s("div",{staticClass:"setting-item",staticStyle:{width:"320px"}},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("尺寸")))]),s("el-tooltip",{attrs:{effect:"dark",content:"指定生成图像的宽高比",placement:"bottom"}},[s("i",{staticClass:"el-icon-warning-outline tips"})])],1),s("div",{staticClass:"options"},[s("el-radio-group",{attrs:{size:"small"},model:{value:t.size,callback:function(i){t.size=i},expression:"size"}},[s("el-radio-button",{attrs:{label:"1024x1024"}},[t._v("1024x1024")]),s("el-radio-button",{attrs:{label:"1024x1792"}},[t._v("1024x1792")]),s("el-radio-button",{attrs:{label:"1792x1024"}},[t._v("1792x1024")])],1)],1)]),s("div",{staticClass:"setting-item",staticStyle:{width:"180px"}},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("质量")))])]),s("div",{staticClass:"options"},[s("el-radio-group",{attrs:{size:"small"},model:{value:t.quality,callback:function(i){t.quality=i},expression:"quality"}},[s("el-radio-button",{attrs:{label:"standard"}},[t._v("标准")]),s("el-radio-button",{attrs:{label:"hd"}},[t._v("高清")])],1)],1)]),s("div",{staticClass:"setting-item",staticStyle:{width:"180px"}},[s("div",{staticClass:"header"},[s("span",[t._v("✳ "+t._s(t._f("lang")("风格")))])]),s("div",{staticClass:"options"},[s("el-radio-group",{attrs:{size:"small"},model:{value:t.style,callback:function(i){t.style=i},expression:"style"}},[s("el-radio-button",{attrs:{label:"natural"}},[t._v("自然")]),s("el-radio-button",{attrs:{label:"vivid"}},[t._v("鲜艳")])],1)],1)])]),s("div",{staticClass:"setting-row"},[s("prompt",{ref:"prompt",staticStyle:{width:"100%"},attrs:{type:"openai"}})],1)])])},M=[],F={components:{prompt:L},data:function(){return{size:"1024x1024",quality:"standard",style:"natural"}},methods:{switchSize:function(t){this.size=t},getDrawOptions:function(){var t={size:this.size,quality:this.quality,style:this.style};return t.words=this.$refs["prompt"].getWordsPicked(),t},clearDrawOptions:function(){this.$refs.prompt.clearPicked()},setDrawOptions:function(t){this.size=t.size?t.size:"1024x1024",this.quality=t.quality?t.quality:"standard",this.style=t.style?t.style:"natural",t.words&&this.$refs.prompt.setWords(t.words)}}},Y=F,K=(s("62c6"),Object(P["a"])(Y,U,M,!1,null,"05692c6a",null)),V=K.exports,Q=function(){var t=this,i=t.$createElement;t._self._c;return t._m(0)},X=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"welcome"},[s("div",{staticClass:"nodata"},[s("img",{attrs:{src:"/static/img/draw_nodata.png"}}),s("p",{staticClass:"tips"},[t._v("您还没有作品，快去创作吧")])])])}],Z=(s("2850"),{}),tt=Object(P["a"])(Z,Q,X,!1,null,"b0563d94",null),it=tt.exports,st=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticStyle:{"margin-bottom":"10px !important"}},[0===t.item.state?s("div",{staticClass:"writing"},[s("draw-loading",{attrs:{title:t._f("lang")("排队中，请稍候..."),color:"#04BABE","text-color":"#999"}})],1):3===t.item.state?s("div",{staticClass:"writing"},[t.item.response&&t.item.response[0]?s("div",[s("div",{staticClass:"writing",staticStyle:{position:"absolute",left:"0",top:"0","z-index":"2",background:"rgba(0, 0, 0, 0.5)"}},[s("draw-loading",{attrs:{title:t._f("lang")("生成中，预计需要1-3分钟左右"),color:"#04BABE","text-color":"#ccc"}})],1),s("el-image",{attrs:{src:t.item.response[0]}})],1):s("div",[s("draw-loading",{attrs:{title:t._f("lang")("生成中，预计需要1-3分钟左右"),color:"#04BABE","text-color":"#999"}})],1)]):1===t.item.state?s("div",[s("div",{staticStyle:{overflow:"hidden","border-radius":"10px",width:"512px"}},t._l(t.item.response,(function(i,e){return s("div",{staticClass:"image",class:{small:t.item.response.length>1}},[s("el-image",{attrs:{src:i,"preview-src-list":t.item.response,title:t._f("lang")("点击查看")}}),s("div",{staticClass:"ctrls"},[s("span",{attrs:{title:"下载图片"},on:{click:function(s){return s.stopPropagation(),t.download(i,e)}}},[s("i",{staticClass:"el-icon-download"})]),"mj"===t.item.platform&&4===t.item.response.length?s("span",{attrs:{title:"扩大（U"+(e+1)+"）"},on:{click:function(i){return i.stopPropagation(),t.mjCtrl(t.item.draw_id,"upscale",e+1)}}},[s("svg-icon",{attrs:{"icon-class":"ic_draw_u"}})],1):t._e(),"mj"===t.item.platform&&4===t.item.response.length?s("span",{attrs:{title:"演变（V"+(e+1)+"）"},on:{click:function(i){return i.stopPropagation(),t.mjCtrl(t.item.draw_id,"variation",e+1)}}},[s("svg-icon",{attrs:{"icon-class":"ic_draw_v"}})],1):t._e()])],1)})),0)]):2===t.item.state?s("div",{staticClass:"writing fail"},[s("div",{staticClass:"errmsg"},[s("i",{staticClass:"el-icon-error"}),s("span",{staticStyle:{"max-width":"460px"}},[t._v(t._s(t._f("lang")("生成失败"))+": "+t._s(t.item.errmsg)+" ")])]),s("div",[s("span",{staticClass:"btn-retry",on:{click:function(i){return t.retry(t.item.draw_id)}}},[t._v(t._s(t._f("lang")("重新生成")))])])]):t._e()])},et=[],at=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"loading"},[s("div",{staticClass:"fox-spinner"},[s("div",{staticClass:"spinner-inner",style:"color:"+t.color},[s("div",{staticClass:"spinner-line"}),s("div",{staticClass:"spinner-line"}),s("div",{staticClass:"spinner-line"}),s("div",{staticClass:"spinner-circle"},[t._v(" ● ")])])]),t.title?s("div",{staticClass:"title",style:"color:"+t.textColor},[t._v(t._s(t.title))]):t._e()])},nt=[],ot={name:"Loading",props:{title:{type:String,default:""},color:{type:String,default:"#04BABE"},textColor:{type:String,default:"#999"}},data:function(){return{}}},rt=ot,ct=(s("c0e3"),Object(P["a"])(rt,at,nt,!1,null,"b8558556",null)),lt=ct.exports,dt=s("4e9e"),pt=s.n(dt),ut={components:{drawLoading:lt},props:{item:{type:Object,default:function(){return{}}}},watch:{item:{handler:function(t){},deep:!0}},methods:{previewImage:function(t){this.$emit("preview",t)},retry:function(t){this.$emit("retry",t)},mjCtrl:function(t,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.$emit("mjCtrl",t,i,s)},download:function(t,i){var s="image-"+(i+1);-1!==t.indexOf(".png")?s+=".png":-1!==t.indexOf(".jpg")&&(s+=".jpg"),pt.a.saveAs(t,s)}}},ht=ut,vt=(s("76ac"),Object(P["a"])(ht,st,et,!1,null,"4d5ca646",null)),mt=vt.exports,ft={name:"Draw",components:{drawYijian:H,drawMj:N,drawOpenai:V,imageComponent:mt,welcome:it},data:function(){return{lists:[],wordInput:"",page:1,pagesize:10,drawSetting:{},user_balance_draw:0,drawCate:[],cate_id:"",is_share:!0}},computed:Object(n["a"])(Object(n["a"])({},Object(o["b"])(["user_id","avatar","priceSetting"])),{},{userAvatar:function(){return this.avatar||"/static/img/ic_user.png"},aiAvatar:function(){return"/static/img/ic_ai.png"}}),created:function(){this.getDrawSetting(),this.getHistoryMsg(),this.getUserBalance(),this.getDrawCate()},methods:{getDrawSetting:function(){var t=this;p().then((function(i){t.drawSetting=i.data}))},getUserBalance:function(){var t=this;Object(r["i"])().then((function(i){t.user_balance_draw=i.data.balance_draw}))},submitTask:function(){var t=this,i=this.getDrawOptions();!i.words||i.words.length<=0?this.$message.error("请添加画面描述"):this.drawCate.length>0&&!this.cate_id?this.$message.error("请选择图片分类"):(this.scrollBottom(),l({platform:this.drawSetting["platform"],channel:this.drawSetting["channel"],cate_id:this.cate_id,is_share:this.is_share?1:0,options:JSON.stringify(i)}).then((function(i){t.lists.push({state:"mj"===t.drawSetting["platform"]?0:3,draw_id:i.data.draw_id,message:i.data.message,create_time:i.data.create_time,platform:t.drawSetting["platform"]}),t.clearOptions(),t.startLoopResult(i.data.draw_id),t.getUserBalance(),setTimeout((function(){t.scrollBottom()}),500)})).catch((function(i){403===i.errno?t.$modals.showLogin():-1!==i.message.indexOf("充值")&&(t.showPay(),setTimeout((function(){t.$message.error(i.message)}),500))})))},startLoopResult:function(t){var i=this,s=setInterval((function(){v({draw_id:t}).then((function(e){var a=e.data.state;if(0!==a)if(-1!==a){1!==a&&2!==a||i.getUserBalance();var n=i.lists;n.forEach((function(i,o){i.draw_id===t&&(n[o].state=a,1===a?(n[o].response=e.data.images,clearInterval(s)):2===a?(n[o].errmsg=e.data.message,clearInterval(s)):3===a&&(n[o].response=[e.data.image]))})),i.lists=n}else clearInterval(s)}))}),5e3)},retryDraw:function(t){var i=this;l({draw_id:t}).then((function(s){var e=i.lists;e.forEach((function(s,a){s.draw_id===t&&(e[a].state="mj"===i.drawSetting["platform"]?0:3,e[a].errmsg="",e[a].response="",i.startLoopResult(t))})),i.lists=e,i.getUserBalance()}))},mjCtrl:function(t,i,s){var e=this;d({draw_id:t,type:i,index:s}).then((function(t){e.lists.push({state:0,draw_id:t.data.draw_id,message:t.data.message,platform:e.drawSetting["platform"]}),e.startLoopResult(t.data.draw_id),e.getUserBalance(),setTimeout((function(){e.scrollBottom()}),500)}))},getHistoryMsg:function(){var t=this;h({platform:this.drawSetting["platform"],channel:this.drawSetting["channel"],page:this.page,pagesize:this.pagesize}).then((function(i){if(i.data.length>0){var s=i.data;t.lists=s,s&&s.forEach((function(i,s){0!==i.state&&3!==i.state||t.startLoopResult(i.draw_id)}))}setTimeout((function(){t.scrollBottom()}),500)}))},getDrawCate:function(){var t=this;g().then((function(i){t.drawCate=i.data}))},getDrawOptions:function(){var t={};return this.$refs.drawSetting&&(t=this.$refs.drawSetting.getDrawOptions()),t},clearOptions:function(){this.$refs.drawSetting&&this.$refs.drawSetting.clearDrawOptions()},scrollBottom:function(){var t=this;this.$nextTick((function(){if(t.$refs["msglist"]){var i=t.$refs["msglist"].wrap;setTimeout((function(){i.scrollTop=i.scrollHeight}),200)}}))},replayOptions:function(t){var i=this;u({draw_id:t}).then((function(t){t.data.cate_id&&(i.cate_id=t.data.cate_id),i.is_share=!0,i.$refs.drawSetting.setDrawOptions(t.data.options)}))},showPay:function(){this.priceSetting.draw_vip?this.$modals.showPay("vip"):this.$modals.showPay("point")}}},gt=ft,wt=Object(P["a"])(gt,e,a,!1,null,null,null);i["default"]=wt.exports},"76ac":function(t,i,s){"use strict";s("b1e8")},"7cdf":function(t,i,s){"use strict";s("9ec5")},"94dd":function(t,i,s){"use strict";s("ee31")},"97a6":function(t,i,s){},"97ff":function(t,i,s){},"9ec5":function(t,i,s){},b1e8:function(t,i,s){},bc45:function(t,i,s){"use strict";s("97a6")},c0e3:function(t,i,s){"use strict";s("ca55")},ca55:function(t,i,s){},ee31:function(t,i,s){}}]);