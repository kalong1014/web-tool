(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-166380ea"],{"05da":function(t,i,e){},"1bf0":function(t,i,e){"use strict";e("cd36")},"1c66":function(t,i,e){},2807:function(t,i,e){"use strict";e("2aeb")},"2aeb":function(t,i,e){},"2fd6":function(t,i,e){},"3ab2":function(t,i,e){"use strict";e("4048")},4048:function(t,i,e){},"4d0e":function(t,i,e){"use strict";e("58bd")},"58ba":function(t,i,e){},"58bd":function(t,i,e){},"5e1f":function(t,i,e){"use strict";e("2fd6")},6419:function(t,i,e){},"7da9":function(t,i,e){},"8c50":function(t,i,e){},"9d36":function(t,i,e){"use strict";e("6419")},a169:function(t,i,e){"use strict";e("05da")},aa57:function(t,i,e){"use strict";e("58ba")},ae7c:function(t,i,e){"use strict";e("7da9")},b12e:function(t,i,e){"use strict";e("f2ae")},b140:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.pageTotal>1?e("div",{staticClass:"pages"},[e("span",{staticStyle:{width:"88px"},on:{click:t.toPrev}},[t._v("上页")]),e("div",{staticStyle:{"text-align":"center"}},t._l(t.pageTotal,(function(i){return e("span",{class:{active:t.page===i},on:{click:function(e){return t.toPage(i)}}},[t._v(t._s(i))])})),0),e("span",{staticStyle:{width:"88px"},on:{click:t.toNext}},[t._v("下页")])]):t._e()},a=[],o=(e("51c1"),{props:{page:{type:Number,default:1},pageTotal:{type:Number,default:1}},methods:{toPage:function(t){this.page!==t&&this.$emit("change",t)},toPrev:function(){this.page>1&&this.toPage(this.page-1)},toNext:function(){this.page<this.pageTotal&&this.toPage(this.page+1)}}}),n=o,c=e("76b2"),l=Object(c["a"])(n,s,a,!1,null,null,null);i["a"]=l.exports},bc9b:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"module-video"},[e("div",{staticClass:"platform-list"},[t.pikaSetting&&t.pikaSetting["is_open"]?e("div",{staticClass:"item",class:{active:"pika"===t.activePlatform},on:{click:function(i){return t.switchPlatform("pika")}}},[t._v("Pika")]):t._e(),t.runwaySetting&&t.runwaySetting["is_open"]?e("div",{staticClass:"item",class:{active:"runway"===t.activePlatform},on:{click:function(i){return t.switchPlatform("runway")}}},[t._v("Runway")]):t._e(),t.stableSetting&&t.stableSetting["is_open"]?e("div",{staticClass:"item",class:{active:"stable"===t.activePlatform},on:{click:function(i){return t.switchPlatform("stable")}}},[t._v("Stable Video")]):t._e(),t.soraSetting&&t.soraSetting["is_open"]?e("div",{staticClass:"item",class:{active:"sora"===t.activePlatform},on:{click:function(i){return t.switchPlatform("sora")}}},[t._v("Sora")]):t._e()]),e("div",{staticClass:"sub-sidebar"},[e("div",{staticClass:"module-body"},["pika"===t.activePlatform?e("videoPika",{ref:"videoSetting"}):"runway"===t.activePlatform?e("videoRunway",{ref:"videoSetting"}):"stable"===t.activePlatform?e("videoStable",{ref:"videoSetting"}):"sora"===t.activePlatform?e("videoSora",{ref:"videoSetting"}):t._e()],1),"pika"===t.activePlatform||"runway"===t.activePlatform||"luma"===t.activePlatform?e("div",{staticClass:"module-footer"},[t.priceSetting.video>0?e("div",{staticClass:"box-price",on:{click:t.showPay}},[e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"ic_mod_video"}}),e("span",{staticClass:"num"},[t._v(t._s(t.priceSetting.video))]),t._v(t._s(t.priceSetting.title)+"/"+t._s(t._f("lang")("次"))+" "),t.priceSetting.video_vip?e("span",{staticClass:"vip"},[t._v("会员免费")]):t._e()],1):e("div",{staticClass:"box-price",staticStyle:{cursor:"default"},on:{click:t.showUserInfo}},[e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"ic_mod_video"}}),e("span",{staticClass:"vip"},[t._v("免费使用")])],1),e("el-button",{staticClass:"btn-video",attrs:{type:"primary",title:t._f("lang")("发送")},on:{click:t.submitTask}},[e("svg-icon",{attrs:{"icon-class":"ic_pika"}}),t._v(" 生成视频 ")],1)],1):t._e()]),e("div",{staticClass:"main-wrapper box-chat"},[t.videoShopIsOpen?e("div",{staticClass:"type-list"},[e("div",{staticClass:"tab-type"},[e("div",{staticClass:"tab-item",class:{active:"public"===t.listType},on:{click:function(i){return t.switchListType("public")}}},[t._v("作品广场")]),e("div",{staticClass:"tab-item",class:{active:"my"===t.listType},on:{click:function(i){return t.switchListType("my")}}},[t._v("我的作品")])])]):t._e(),t.videoShopIsOpen&&"public"===t.listType?e("div",{staticClass:"chat-msg",staticStyle:{bottom:"0"}},[e("el-scrollbar",{ref:"publicList",attrs:{"wrap-class":"scrollbar-wrapper"}},[e("div",{staticClass:"video-list"},t._l(t.publicList,(function(i){return e("div",{staticClass:"video-item",on:{mouseenter:function(e){return t.videoMouseEnter(i.video_id)},mouseleave:function(e){return t.videoMouseLeave(i.video_id)},click:function(e){return e.stopPropagation(),t.showVideoDetail(i)}}},[e("div",{staticClass:"video",class:{active:t.hoverVideoId===i.video_id}},[e("video",{attrs:{id:"public_video_"+i.video_id,muted:"",poster:i.poster,src:i.video,loop:"loop",preload:"none"},domProps:{muted:!0}}),e("div",{staticClass:"poster",style:"background-image: url("+i.poster+");"}),e("div",{staticClass:"btn-play"},[e("div",{staticClass:"icon",staticStyle:{"background-image":"url(/static/img/ic_play.png)"}})]),e("div",{staticClass:"prompt"},[t._v(t._s(i.prompt))])])])})),0),e("div",{staticStyle:{width:"100%",margin:"20px 0"}},[e("pages",{attrs:{page:t.publicPage,"page-total":t.publicPageTotal},on:{change:t.changePublicPage}})],1)])],1):"my"===t.listType&&t.myList&&t.myList.length>0?e("div",{staticClass:"chat-msg style-write",staticStyle:{bottom:"0"}},[e("el-scrollbar",{ref:"myList",attrs:{"wrap-class":"scrollbar-wrapper"}},[e("div",{staticClass:"msg-list",staticStyle:{width:"862px"},style:t.videoShopIsOpen?"padding-top: 70px;":"padding-top: 0;"},t._l(t.myList,(function(i){return e("div",{staticClass:"msg-row"},[e("div",{staticClass:"msg-item row-user",staticStyle:{padding:"20px 30px 10px 30px",width:"862px"}},[e("div",{staticClass:"avatar",staticStyle:{background:"#9aa37e"}},[e("img",{attrs:{src:t.userAvatar,alt:""}})]),e("div",{staticClass:"text markdown-body",staticStyle:{"padding-top":"3px"}},[t._v(" "+t._s(i.prompt)),"upscale"===i.action?e("span",[t._v(" --upscale")]):t._e(),e("div",{staticClass:"tools",staticStyle:{opacity:"1"}},[e("span",{staticClass:"btn text-primary",attrs:{title:"将参数填充到左侧面板"},on:{click:function(e){return t.handleMyVideo("copy",i.video_id)}}},[e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"ic_copy"}}),t._v(t._s(t._f("lang")("复用参数")))],1),e("span",{staticStyle:{"font-size":"13px",color:"#898989"}},[t._v(t._s(i.create_time))])])])]),e("div",{staticClass:"msg-item row-ai",staticStyle:{padding:"15px 30px 20px 30px",width:"862px"}},[e("div",{staticClass:"avatar",staticStyle:{opacity:"0"}}),e("div",{staticClass:"text",staticStyle:{width:"720px"}},[e("videoItem",{attrs:{item:i},on:{retry:t.retryVideo}}),1===i.state?e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between",margin:"15px 0 10px 0"}},[t.showEditBtn||t.showExtendBtn?e("div",{staticClass:"btn-group"},[e("el-button",{attrs:{size:"mini",type:"default",icon:"el-icon-edit-outline",title:"编辑本视频的内容"},on:{click:function(e){return t.handleMyVideo("edit",i.video_id)}}},[t._v("编辑视频")]),e("el-button",{attrs:{size:"mini",type:"default",icon:"el-icon-time",title:"将视频延长4秒"},on:{click:function(e){return t.handleMyVideo("extend",i.video_id)}}},[t._v("延长4s")])],1):t._e(),i.seed?e("span",{staticStyle:{"font-size":"13px",color:"#898989"},attrs:{title:"种子值 --seed"}},[e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"ic_seed"}}),t._v(" "+t._s(i.seed))],1):t._e()]):t._e()],1)]),e("div",{staticStyle:{clear:"both"}})])})),0)])],1):t._e(),"public"===t.listType&&0===t.publicList.length?e("welcome",{attrs:{desc:"广场空空的~"}}):t._e(),"my"===t.listType&&0===t.myList.length?e("welcome",{attrs:{desc:"您还没有作品，快去创作吧"}}):t._e(),t.activeVideo?e("videoDetail",{attrs:{video:t.activeVideo,"show-edit":t.showEditBtn,"show-extend":t.showExtendBtn},on:{handle:t.handlePublicVideo,close:t.closeVideoDetail}}):t._e()],1)])},a=[],o=e("e089"),n=(e("c9c8"),e("f17d"),e("a7fa"),e("d3da"),e("6db4")),c=e("5f87"),l=e("b775");function r(t){return Object(l["a"])({url:"/video/submitTask",method:"post",data:t})}function p(t){return Object(l["a"])({url:"/video/getVideoSetting",method:"post",data:t})}function d(t){return Object(l["a"])({url:"/video/getVideoOptions",method:"post",data:t})}function u(t){return Object(l["a"])({url:"/video/getHistoryMsg",method:"post",data:t})}function m(t){return Object(l["a"])({url:"/video/getPublicList",method:"post",data:t})}function v(t){return Object(l["a"])({url:"/video/getVideoResult",method:"post",hideLoading:!0,data:t})}function h(t){return Object(l["a"])({url:"/video/uploadMedia",method:"post",data:t})}function g(t){return Object(l["a"])({url:"/video/upscale",method:"post",data:t})}var f=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[e("div",{staticClass:"box-setting"},[e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("内容描述")))]),e("el-button",{attrs:{type:"primary",plain:"",size:"mini",title:"所有参数恢复默认"},on:{click:t.init}},[t._v("重置")])],1),e("div",{staticClass:"options",staticStyle:{position:"relative"}},[t.options.image||t.options.video?e("div",{staticClass:"uploader"},[t.options.image?e("a",{attrs:{title:"参考图",href:t.options.image,target:"_blank"}},[e("img",{staticClass:"image",attrs:{src:t.options.image}})]):t._e(),t.options.video?e("a",{attrs:{title:"参考视频",href:t.options.video,target:"_blank"}},[e("img",{staticClass:"image",attrs:{src:"/static/img/video.png"}})]):t._e(),e("span",{staticClass:"del",attrs:{title:"移除"},on:{click:function(i){return i.stopPropagation(),t.removeMedia(i)}}},[e("i",{staticClass:"el-icon-close"})]),"extend"===t.options.action?e("div",{staticClass:"action"},[e("i",{staticClass:"el-icon-time"}),t._v(" 延长4s")]):t._e(),"edit"===t.options.action?e("div",{staticClass:"action"},[e("i",{staticClass:"el-icon-edit-outline"}),t._v(" 编辑视频")]):t._e()]):e("el-upload",{staticClass:"uploader",attrs:{title:"上传参考图片 / 视频",action:"",accept:".jpg,.png,.mp4","before-upload":t.checkMediaType,"http-request":t.uploadMedia,"show-file-list":!1,multiple:!1}},[e("div",{staticClass:"uploader-icon"},[e("i",{staticClass:"icon el-icon-plus"}),e("p",[t._v("图片 / 视频")])])]),e("el-input",{ref:"messageInput",staticStyle:{"padding-left":"90px"},attrs:{placeholder:t._f("lang")("输入视频内容文字描述"),type:"textarea",autofocus:!0,autosize:{minRows:3,maxRows:8},maxlength:"2000"},model:{value:t.options.prompt,callback:function(i){t.$set(t.options,"prompt",i)},expression:"options.prompt"}})],1)])]),e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("视频比例")))]),e("el-tooltip",{attrs:{effect:"dark",content:"生成视频画面的宽高比",placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"options",staticStyle:{display:"flex","justify-content":"space-around"}},[t._l(t.sizes,(function(i){return e("div",{staticClass:"size-item",class:{active:t.options.aspectRatio===i.width+":"+i.height},on:{click:function(e){return t.setSize(i.width,i.height)}}},[i.width>=i.height?e("div",{staticClass:"size-block",style:"width: 36px; height: "+parseInt(i.height/i.width*36)+"px;"}):e("div",{staticClass:"size-block",style:"height: 36px; width: "+parseInt(i.width/i.height*36)+"px;"}),e("span",[t._v(t._s(i.title))])])})),e("div",{staticStyle:{clear:"both"}})],2)])]),e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("帧率")))]),e("el-tooltip",{attrs:{effect:"dark",content:t.frameRate.explain,placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"options"},[e("div",{staticStyle:{"padding-bottom":"10px"}},[e("el-slider",{attrs:{min:t.frameRate.min,max:t.frameRate.max,marks:t.frameRate.marks},model:{value:t.options.frameRate,callback:function(i){t.$set(t.options,"frameRate",i)},expression:"options.frameRate"}})],1),e("div",{staticStyle:{clear:"both"}})])])]),e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("镜头控制")))]),e("el-tooltip",{attrs:{effect:"dark",content:"指摄影机位置不动，但摄影机方向会移动",placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"option-radio-group"},[e("div",{staticClass:"radio-item"},[e("span",{staticClass:"label"},[t._v("左右")]),e("optionRadio",{attrs:{options:[{icon:"el-icon-back",value:"left"},{icon:"el-icon-right",value:"right"}],name:"pan",value:t.options.pan,"can-cancel":!0},on:{change:t.optionChange}})],1),e("div",{staticClass:"radio-item",staticStyle:{"margin-right":"0","margin-left":"20px"}},[e("span",{staticClass:"label"},[t._v("倾斜")]),e("optionRadio",{attrs:{options:[{icon:"el-icon-top",value:"up"},{icon:"el-icon-bottom",value:"down"}],name:"tilt",value:t.options.tilt,"can-cancel":!0},on:{change:t.optionChange}})],1),e("div",{staticClass:"radio-item"},[e("span",{staticClass:"label"},[t._v("旋转")]),e("optionRadio",{attrs:{options:[{icon:"el-icon-refresh-left",value:"ccw"},{icon:"el-icon-refresh-right",value:"cw"}],name:"rotate",value:t.options.rotate,"can-cancel":!0},on:{change:t.optionChange}})],1),e("div",{staticClass:"radio-item",staticStyle:{"margin-right":"0","margin-left":"20px"}},[e("span",{staticClass:"label"},[t._v("变焦")]),e("optionRadio",{attrs:{options:[{icon:"el-icon-zoom-in",value:"in"},{icon:"el-icon-zoom-out",value:"out"}],name:"zoom",value:t.options.zoom,"can-cancel":!0},on:{change:t.optionChange}})],1),e("div",{staticStyle:{clear:"both"}})])])]),e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("与文本一致性")))]),e("el-tooltip",{attrs:{effect:"dark",content:t.guidanceScale.explain,placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"options"},[e("div",{staticStyle:{"padding-bottom":"10px"}},[e("el-slider",{attrs:{min:t.guidanceScale.min,max:t.guidanceScale.max,marks:t.guidanceScale.marks},model:{value:t.options.guidanceScale,callback:function(i){t.$set(t.options,"guidanceScale",i)},expression:"options.guidanceScale"}})],1),e("div",{staticStyle:{clear:"both"}})])])]),e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("运动增强")))]),e("el-tooltip",{attrs:{effect:"dark",content:t.motion.explain,placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"options"},[e("div",[e("el-slider",{attrs:{min:t.motion.min,max:t.motion.max,marks:t.motion.marks},model:{value:t.options.motion,callback:function(i){t.$set(t.options,"motion",i)},expression:"options.motion"}})],1),e("div",{staticStyle:{clear:"both"}})])])]),e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("排除内容")))]),e("el-tooltip",{attrs:{effect:"dark",content:"指定视频内要排除的生成内容",placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"options"},[e("el-input",{staticStyle:{width:"420px"},attrs:{type:"text",placeholder:t._f("lang")("请输入想从视频中排除的内容"),size:"normal"},model:{value:t.options.negativePrompt,callback:function(i){t.$set(t.options,"negativePrompt",i)},expression:"options.negativePrompt"}}),e("div",{staticStyle:{clear:"both"}})],1)])]),e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("种子 --seed")))]),e("el-tooltip",{attrs:{effect:"dark",content:"种子可以用于生成连续视频，使生成视频保持同一种风格",placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"options"},[e("el-input",{staticStyle:{width:"420px"},attrs:{type:"text",placeholder:t._f("lang")("请输入seed种子编号"),size:"normal"},model:{value:t.options.seed,callback:function(i){t.$set(t.options,"seed",i)},expression:"options.seed"}}),e("div",{staticStyle:{clear:"both"}})],1)])])])])},_=[],y=(e("390d"),function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.options&&t.options.length>0?e("div",{staticClass:"option-radio"},t._l(t.options,(function(i){return e("div",{staticClass:"item",class:{active:i.value===t.activeValue},on:{click:function(e){return t.onSelect(i.value)}}},[i.icon?e("i",{class:i.icon}):t._e(),i.title?e("span",[t._v(t._s(i.title))]):t._e()])})),0):t._e()}),b=[],C=(e("c565"),{props:{options:{type:Array,default:function(){return[]}},name:{type:String,default:""},value:{type:String,default:""},canCancel:{type:Boolean,default:!0}},data:function(){return{activeValue:""}},watch:{value:function(){this.activeValue=this.value}},methods:{onSelect:function(t){this.canCancel&&this.activeValue===t&&(t=""),this.activeValue=t,this.$emit("change",this.name,t)}}}),w=C,x=(e("5e1f"),e("76b2")),S=Object(x["a"])(w,y,b,!1,null,"2df29080",null),k=S.exports,O={components:{optionRadio:k},data:function(){return{defaultOptions:{action:"generate",water:0,guidanceScale:12,seed:"",negativePrompt:"",frameRate:24,pan:"",rotate:"",tilt:"",zoom:"",motion:0,prompt:"",aspectRatio:"16:9",image:"",video:""},options:{},sizes:[{width:16,height:9,title:"16:9",desc:""},{width:9,height:16,title:"9:16",desc:""},{width:1,height:1,title:"1:1",desc:""},{width:5,height:2,title:"5:2",desc:""},{width:4,height:5,title:"4:5",desc:""},{width:4,height:3,title:"4:3",desc:""}],frameRate:{min:8,max:24,marks:{8:"8",24:"24"},explain:"每秒帧数，越大越流畅，文件也越大"},motion:{min:0,max:4,marks:{0:"0",4:"4"},explain:"使生成的视频更具动感"},guidanceScale:{min:5,max:25,marks:{5:"5",12:"默认12",25:"25"},explain:"值越大，视频内容越遵守文字要求"},mediaType:""}},created:function(){this.init()},methods:{init:function(){this.options=JSON.parse(JSON.stringify(this.defaultOptions))},optionChange:function(t,i){this.$set(this.options,t,i)},getVideoOptions:function(){return JSON.parse(JSON.stringify(this.options))},clearVideoOptions:function(){this.options.image="",this.options.video=""},setVideoOptions:function(t){var i=JSON.parse(JSON.stringify(this.defaultOptions));this.options=JSON.parse(JSON.stringify(Object.assign(i,t)))},setSize:function(t,i){this.options.aspectRatio=t+":"+i},checkMediaType:function(t){return"image/png"!==t.type&&"image/jpeg"!==t.type&&"video/mp4"!==t.type?(this.$message.error(this.$lang("图片仅支持.png、.jpg 格式，视频仅支持 .mp4 格式")),!1):("video/mp4"===t.type&&t.size>52428800?this.$message.error("请上传小于50MB的视频"):t.size>20971520&&this.$message.error("请上传小于20MB的图片"),!0)},uploadMedia:function(t){var i=this,e=new FormData;e.append("file",t.file),t.data&&e.append("data",JSON.stringify(t.data)),h(e).then((function(t){i.mediaType=t.data.type,"image"===t.data.type?i.options.image=t.data.path:"video"===t.data.type&&(i.options.video=t.data.path)})).catch((function(t){403===t.errno&&i.$modals.showLogin()}))},removeMedia:function(){this.options.mediaType="",this.options.image="",this.options.video="",this.options.action="generate"}}},P=O,z=(e("a169"),e("e352"),Object(x["a"])(P,f,_,!1,null,"9b9616fe",null)),$=z.exports,V=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[e("div",{staticClass:"box-video-setting"},[e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("内容描述")))]),e("el-button",{attrs:{type:"primary",plain:"",size:"mini",title:"所有参数恢复默认"},on:{click:t.clearParameter}},[t._v("重置")])],1),e("div",{staticClass:"options",staticStyle:{position:"relative"}},[e("div",{staticClass:"upload"},[t.options.image?e("div",{staticClass:"uploader"},[t.options.image?e("a",{attrs:{title:"参考图",href:t.options.image,target:"_blank"}},[e("img",{staticClass:"image",attrs:{src:t.options.image}})]):t._e(),e("span",{staticClass:"del",attrs:{title:"移除"},on:{click:function(i){return i.stopPropagation(),t.removeMedia(i)}}},[e("i",{staticClass:"el-icon-close"})])]):e("el-upload",{staticClass:"uploader",attrs:{title:"上传参考图片",action:"",accept:".jpg,.png","before-upload":t.checkMediaType,"http-request":t.uploadMedia,"show-file-list":!1,multiple:!1}},[e("div",{staticClass:"uploader-icon"},[e("i",{staticClass:"icon el-icon-plus"}),e("p",[t._v("图片")])])]),e("el-input",{ref:"messageInput",staticStyle:{"padding-left":"90px"},attrs:{placeholder:t._f("lang")("输入视频内容文字描述"),type:"textarea",autofocus:!0,autosize:{minRows:3,maxRows:8},maxlength:"2000"},model:{value:t.options.prompt,callback:function(i){t.$set(t.options,"prompt",i)},expression:"options.prompt"}})],1)])])]),e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("视频比例")))]),e("el-tooltip",{attrs:{effect:"dark",content:"指定生成图像的宽高比",placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"options",staticStyle:{display:"flex","justify-content":"space-around"}},[t._l(t.sizes,(function(i){return e("div",{staticClass:"size-item",class:{active:t.options.aspectRatio===i.width+":"+i.height},on:{click:function(e){return t.setSize(i.width,i.height)}}},[i.width>=i.height?e("div",{staticClass:"size-block",style:"width: 36px; height: "+parseInt(i.height/i.width*36)+"px;"}):e("div",{staticClass:"size-block",style:"height: 36px; width: "+parseInt(i.width/i.height*36)+"px;"}),e("span",[t._v(t._s(i.title))])])})),e("div",{staticStyle:{clear:"both"}})],2)])])])])},T=[],L={data:function(){return{defaultOptions:{action:"generate",prompt:"",aspectRatio:"16:9",image:""},options:{},sizes:[{width:16,height:9,title:"16:9",desc:""},{width:9,height:16,title:"9:16",desc:""},{width:1,height:1,title:"1:1",desc:""},{width:5,height:2,title:"5:2",desc:""},{width:4,height:5,title:"4:5",desc:""},{width:4,height:3,title:"4:3",desc:""}],mediaType:""}},created:function(){this.options=JSON.parse(JSON.stringify(this.defaultOptions))},methods:{optionChange:function(t,i){this.$set(this.options,t,i)},getVideoOptions:function(){return JSON.parse(JSON.stringify(this.options))},clearVideoOptions:function(){this.options.image=""},setVideoOptions:function(t){t=Object.assign(this.defaultOptions,t),this.options=JSON.parse(JSON.stringify(t))},showPay:function(t){this.$emit("showPay",t)},setSize:function(t,i){this.options.aspectRatio=t+":"+i},checkMediaType:function(t){return"image/png"===t.type||"image/jpeg"===t.type||(this.$message.error(this.$lang("图片仅支持.png、.jpg 格式")),!1)},uploadMedia:function(t){var i=this,e=new FormData;e.append("file",t.file),t.data&&e.append("data",JSON.stringify(t.data)),h(e).then((function(t){i.mediaType=t.data.type,"image"===t.data.type&&(i.options.image=t.data.path)})).catch((function(t){403===t.errno&&i.$emit("showLogin")}))},clearParameter:function(){this.options.prompt="",this.options.image="",this.options.action="generate",this.options.aspectRatio="16:9"},removeMedia:function(){this.options.mediaType="",this.options.image="",this.options.action="generate"}}},R=L,j=(e("4d0e"),e("9d36"),Object(x["a"])(R,V,T,!1,null,"7708dfca",null)),E=(j.exports,function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[e("div",{staticClass:"box-setting"},[e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("内容描述")))]),e("el-button",{attrs:{type:"primary",plain:"",size:"mini",title:"所有参数恢复默认"},on:{click:t.clearParameter}},[t._v("重置")])],1),e("div",{staticClass:"options",staticStyle:{position:"relative"}},[e("div",{staticClass:"upload"},[t.options.image||t.options.video?e("div",{staticClass:"uploader"},[t.options.image?e("a",{attrs:{title:"参考图",href:t.options.image,target:"_blank"}},[e("img",{staticClass:"image",attrs:{src:t.options.image}})]):t._e(),e("span",{staticClass:"del",attrs:{title:"移除"},on:{click:function(i){return i.stopPropagation(),t.removeMedia(i)}}},[e("i",{staticClass:"el-icon-close"})])]):e("el-upload",{staticClass:"uploader",attrs:{title:"上传参考图片",action:"",accept:".jpg,.png","before-upload":t.checkMediaType,"http-request":t.uploadMedia,"show-file-list":!1,multiple:!1}},[e("div",{staticClass:"uploader-icon"},[e("i",{staticClass:"icon el-icon-plus"}),e("p",[t._v("图片")])])]),e("el-input",{ref:"messageInput",staticStyle:{"padding-left":"90px"},attrs:{placeholder:t._f("lang")("输入视频内容文字描述"),type:"textarea",autofocus:!0,autosize:{minRows:3,maxRows:8},maxlength:"2000"},model:{value:t.options.prompt,callback:function(i){t.$set(t.options,"prompt",i)},expression:"options.prompt"}})],1)])])]),e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item",class:"gen3"===t.options.model?"col-1":""},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("模型 --model")))]),e("el-tooltip",{attrs:{effect:"dark",content:"指定runway的模型",placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"options"},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.options.model,callback:function(i){t.$set(t.options,"model",i)},expression:"options.model"}},[e("el-radio-button",{attrs:{label:"gen2"}},[t._v("GEN-2")]),e("el-radio-button",{attrs:{label:"gen3"}},[t._v("GEN-3")])],1)],1)]),"gen3"===t.options.model?e("div",{staticClass:"setting-item col-1"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("时长 --seconds")))]),e("el-tooltip",{attrs:{effect:"dark",content:"生成视频的时长",placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"options"},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.options.seconds,callback:function(i){t.$set(t.options,"seconds",i)},expression:"options.seconds"}},[e("el-radio-button",{attrs:{label:"5"}},[t._v("5s")]),e("el-radio-button",{attrs:{label:"10"}},[t._v("10s")])],1)],1)]):t._e()]),"gen2"===t.options.model?e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("视频比例")))]),e("el-tooltip",{attrs:{effect:"dark",content:"生成视频画面的宽高比",placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"options",staticStyle:{display:"flex","justify-content":"space-around"}},[t._l(t.sizes,(function(i){return e("div",{staticClass:"size-item",class:{active:t.options.aspectRatio===i.width+":"+i.height},on:{click:function(e){return t.setSize(i.width,i.height)}}},[i.width>=i.height?e("div",{staticClass:"size-block",style:"width: 36px; height: "+parseInt(i.height/i.width*36)+"px;"}):e("div",{staticClass:"size-block",style:"height: 36px; width: "+parseInt(i.width/i.height*36)+"px;"}),e("span",[t._v(t._s(i.title))])])})),e("div",{staticStyle:{clear:"both"}})],2)])]):t._e(),"gen3"===t.options.model?e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("视频比例")))]),e("el-tooltip",{attrs:{effect:"dark",content:"生成视频画面的宽高比",placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"options",staticStyle:{display:"flex"}},[e("div",{staticClass:"size-item",class:{active:"16:9"===t.options.aspectRatio},on:{click:function(i){return t.setSize(16,9)}}},[e("div",{staticClass:"size-block",staticStyle:{width:"36px",height:"20px"}}),e("span",[t._v("16:9")])]),e("div",{staticClass:"size-item",class:{active:"9:16"===t.options.aspectRatio},on:{click:function(i){return t.setSize(9,16)}}},[e("div",{staticClass:"size-block",staticStyle:{width:"20px",height:"36px"}}),e("span",[t._v("9:16")])]),e("div",{staticStyle:{clear:"both"}})])])]):t._e(),"gen2"===t.options.model?e("div",{staticClass:"setting-row"},[e("div",{staticClass:"setting-item"},[e("div",{staticClass:"header"},[e("span",[t._v("✳ "+t._s(t._f("lang")("镜头控制")))]),e("el-tooltip",{attrs:{effect:"dark",content:"指摄影机位置不动，但摄影机方向会移动",placement:"bottom"}},[e("i",{staticClass:"el-icon-warning-outline tips"})])],1),e("div",{staticClass:"option-motion-vector"},[e("span",{staticClass:"label"},[t._v("水平：")]),e("div",{staticStyle:{"padding-bottom":"20px"}},[e("el-slider",{attrs:{min:t.x.min,max:t.x.max,marks:t.x.marks,"format-tooltip":t.divide10},model:{value:t.options.x,callback:function(i){t.$set(t.options,"x",i)},expression:"options.x"}})],1),e("span",{staticClass:"label"},[t._v("垂直：")]),e("div",{staticStyle:{"padding-bottom":"20px"}},[e("el-slider",{attrs:{min:t.y.min,max:t.y.max,marks:t.y.marks,"format-tooltip":t.divide10},model:{value:t.options.y,callback:function(i){t.$set(t.options,"y",i)},expression:"options.y"}})],1),e("span",{staticClass:"label"},[t._v("缩放：")]),e("div",{staticStyle:{"padding-bottom":"20px"}},[e("el-slider",{attrs:{min:t.z.min,max:t.z.max,marks:t.z.marks,"format-tooltip":t.divide10},model:{value:t.options.z,callback:function(i){t.$set(t.options,"z",i)},expression:"options.z"}})],1),e("span",{staticClass:"label"},[t._v("旋转：")]),e("div",{staticStyle:{"padding-bottom":"20px"}},[e("el-slider",{attrs:{min:t.r.min,max:t.r.max,marks:t.r.marks,"format-tooltip":t.divide10},model:{value:t.options.r,callback:function(i){t.$set(t.options,"r",i)},expression:"options.r"}})],1),e("span",{staticClass:"label"},[t._v("左右倾斜：")]),e("div",{staticStyle:{"padding-bottom":"20px"}},[e("el-slider",{attrs:{min:t.bg_x_pan.min,max:t.bg_x_pan.max,marks:t.bg_x_pan.marks,"format-tooltip":t.divide10},model:{value:t.options.bg_x_pan,callback:function(i){t.$set(t.options,"bg_x_pan",i)},expression:"options.bg_x_pan"}})],1),e("span",{staticClass:"label"},[t._v("上下倾斜：")]),e("div",{staticStyle:{"padding-bottom":"20px"}},[e("el-slider",{attrs:{min:t.bg_y_pan.min,max:t.bg_y_pan.max,marks:t.bg_y_pan.marks,"format-tooltip":t.divide10},model:{value:t.options.bg_y_pan,callback:function(i){t.$set(t.options,"bg_y_pan",i)},expression:"options.bg_y_pan"}})],1)])])]):t._e()])])}),M=[],N={data:function(){return{defaultOptions:{action:"generate",prompt:"",aspectRatio:"16:9",style:"cinematic",model:"gen3",x:0,y:0,z:0,r:0,bg_x_pan:0,bg_y_pan:0,seconds:"10",image:""},options:{},sizes:[{width:16,height:9,title:"16:9",desc:""},{width:9,height:16,title:"9:16",desc:""},{width:1,height:1,title:"1:1",desc:""},{width:4,height:3,title:"4:3",desc:""},{width:21,height:9,title:"21:9",desc:""}],x:{min:-100,max:100,marks:{"-100":"-10",0:"默认0",100:"10"},explain:"水平"},y:{min:-100,max:100,marks:{"-100":"-10",0:"默认0",100:"10"},explain:"垂直"},z:{min:-100,max:100,marks:{"-100":"-10",0:"默认0",100:"10"},explain:"缩放"},r:{min:-100,max:100,marks:{"-100":"-10",0:"默认0",100:"10"},explain:"旋转"},bg_x_pan:{min:-100,max:100,marks:{"-100":"-10",0:"默认0",100:"10"},explain:"左右方向倾斜"},bg_y_pan:{min:-100,max:100,marks:{"-100":"-10",0:"默认0",100:"10"},explain:"上下方向倾斜"},mediaType:""}},watch:{"options.model":function(){"gen3"===this.options.model&&"16:9"!==this.options.aspectRatio&&"9:16"!==this.options.aspectRatio&&(this.options.aspectRatio="16:9")}},created:function(){this.options=JSON.parse(JSON.stringify(this.defaultOptions))},methods:{getVideoOptions:function(){var t=JSON.parse(JSON.stringify(this.options));return t.x&&(t.x=this.divide10(t.x)),t.y&&(t.y=this.divide10(t.y)),t.z&&(t.z=this.divide10(t.z)),t.r&&(t.r=this.divide10(t.r)),t.bg_x_pan&&(t.bg_x_pan=this.divide10(t.bg_x_pan)),t.bg_y_pan&&(t.bg_y_pan=this.divide10(t.bg_y_pan)),t},clearVideoOptions:function(){this.options.image="",this.options.video=""},setVideoOptions:function(t){t.x&&(t.x=10*t.x),t.y&&(t.y=10*t.y),t.z&&(t.z=10*t.z),t.r&&(t.r=10*t.r),t.bg_x_pan&&(t.bg_x_pan=10*t.bg_x_pan),t.bg_y_pan&&(t.bg_y_pan=10*t.bg_y_pan),t=Object.assign(this.defaultOptions,t),this.options=JSON.parse(JSON.stringify(t))},showPay:function(t){this.$emit("showPay",t)},setSize:function(t,i){this.options.aspectRatio=t+":"+i},checkMediaType:function(t){return"image/png"===t.type||"image/jpeg"===t.type||(this.$message.error(this.$lang("图片仅支持.png、.jpg 格式")),!1)},divide10:function(t){return t/10},uploadMedia:function(t){var i=this,e=new FormData;e.append("file",t.file),t.data&&e.append("data",JSON.stringify(t.data)),h(e).then((function(t){i.mediaType=t.data.type,"image"===t.data.type&&(i.options.image=t.data.path)})).catch((function(t){403===t.errno&&i.$modals.showLogin()}))},removeMedia:function(){this.options.mediaType="",this.options.image="",this.options.action="generate"},clearParameter:function(){this.options.action="generate",this.options.prompt="",this.options.aspectRatio="16:9",this.options.style="cinematic",this.options.model="gen3",this.options.x=0,this.options.y=0,this.options.z=0,this.options.r=0,this.options.bg_x_pan=0,this.options.bg_y_pan=0,this.options.seconds="10",this.options.image=""}}},I=N,J=(e("1bf0"),e("bf25"),Object(x["a"])(I,E,M,!1,null,"c73561c4",null)),B=J.exports,D=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"closed"},[e("p",[e("svg-icon",{attrs:{className:"icon","icon-class":"ic_working"}})],1),e("p",[t._v("Stable Video 正在开发中，即将上线")])])},A=[],H={data:function(){return{defaultOptions:{},options:{}}},created:function(){},methods:{}},q=H,F=(e("3ab2"),Object(x["a"])(q,D,A,!1,null,"73948870",null)),U=F.exports,G=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"closed"},[e("p",[e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"ic_working"}})],1),e("p",[t._v("Sora 内测中，静待开放")])])},K=[],Q={data:function(){return{defaultOptions:{},options:{}}},created:function(){},methods:{}},W=Q,X=(e("b12e"),Object(x["a"])(W,G,K,!1,null,"24a0f620",null)),Y=X.exports,Z=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticStyle:{"margin-bottom":"10px !important"}},[0===t.item.state?e("div",{staticClass:"writing"},[e("loading",{attrs:{title:t._f("lang")("生成中，预计需要1-3分钟左右"),color:"#04BABE","text-color":"#999"}})],1):1===t.item.state?e("div",[e("div",{staticClass:"video"},[e("video",{staticClass:"uni-video-video",staticStyle:{"object-fit":"contain"},attrs:{src:t.item.video,poster:t.item.poster,loop:"",preload:"none",playsinline:"",controls:"",disablepictureinpicture:"",controlslist:"nodownload noplaybackrate","play-btn-position":"center"}}),e("span",{staticClass:"btn-download",attrs:{title:"下载视频"},on:{click:function(i){return i.stopPropagation(),t.download(t.item.video)}}},[e("i",{staticClass:"el-icon-download"})])])]):2===t.item.state?e("div",{staticClass:"writing fail"},[e("div",{staticClass:"errmsg"},[e("i",{staticClass:"el-icon-error"}),e("span",{staticStyle:{"max-width":"460px"}},[t._v(t._s(t._f("lang")("生成失败"))+": "+t._s(t.item.errmsg)+" ")])]),e("div",[e("span",{staticClass:"btn-retry",on:{click:function(i){return t.retry(t.item.video_id)}}},[t._v(t._s(t._f("lang")("重新生成")))])])]):t._e()])},tt=[],it=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"loading"},[e("div",{staticClass:"fox-spinner"},[e("div",{staticClass:"spinner-inner",style:"color:"+t.color},[e("div",{staticClass:"spinner-line"}),e("div",{staticClass:"spinner-line"}),e("div",{staticClass:"spinner-line"}),e("div",{staticClass:"spinner-circle"},[t._v(" ● ")])])]),t.title?e("div",{staticClass:"title",style:"color:"+t.textColor},[t._v(t._s(t.title))]):t._e()])},et=[],st={name:"Loading",props:{title:{type:String,default:""},color:{type:String,default:"#04BABE"},textColor:{type:String,default:"#999"}},data:function(){return{}}},at=st,ot=(e("2807"),Object(x["a"])(at,it,et,!1,null,"01abbfcc",null)),nt=ot.exports,ct=e("4e9e"),lt=e.n(ct),rt={components:{loading:nt},props:{item:{type:Object,default:function(){return{}}}},methods:{previewImage:function(t){this.$emit("preview",t)},retry:function(t){this.$emit("retry",t)},download:function(t){lt.a.saveAs(t,"video.mp4")}}},pt=rt,dt=(e("aa57"),Object(x["a"])(pt,Z,tt,!1,null,"7bd0f652",null)),ut=dt.exports,mt=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("el-dialog",{attrs:{"custom-class":"my-dialog",title:"视频内容",visible:!0,width:"760px","show-close":!0,"append-to-body":!0,"before-close":t.closeVideo}},[e("div",{staticClass:"container"},[e("div",{staticClass:"video"},[e("video",{staticClass:"uni-video-video",staticStyle:{"object-fit":"contain"},attrs:{src:t.video.video,poster:t.video.poster,loop:"",autoplay:"",playsinline:"",controls:"",disablepictureinpicture:"",controlslist:"nodownload noplaybackrate","play-btn-position":"center"}})]),e("div",{staticClass:"tools"},[e("div",{staticClass:"btn-group"},[e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-document-copy",title:"复用参数，生成同款视频"},on:{click:function(i){return t.handleVideo("copy")}}},[t._v("生成同款")]),t.showEdit?e("el-button",{attrs:{size:"mini",type:"default",icon:"el-icon-edit-outline",title:"编辑本视频的内容"},on:{click:function(i){return t.handleVideo("edit")}}},[t._v("编辑视频")]):t._e(),t.showExtend?e("el-button",{attrs:{size:"mini",type:"default",icon:"el-icon-time",title:"将视频延长4秒"},on:{click:function(i){return t.handleVideo("extend")}}},[t._v("延长4s")]):t._e()],1),t.video.seed?e("span",{staticStyle:{"font-size":"12px",color:"#898989",float:"right"},attrs:{title:"种子值 --seed"}},[e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"ic_seed"}}),t._v(" "+t._s(t.video.seed))],1):t._e()]),e("div",{staticClass:"param"},[e("div",{staticClass:"prompt"},[t._v("提示词："+t._s(t.video.prompt))])])])])],1)},vt=[],ht={props:{video:{type:Object,default:function(){return{}}},showEdit:{type:Boolean,default:!1},showExtend:{type:Boolean,default:!1}},methods:{handleVideo:function(t){this.$emit("handle",t,this.video.video_id)},closeVideo:function(){this.$emit("close")}}},gt=ht,ft=(e("ae7c"),Object(x["a"])(gt,mt,vt,!1,null,"e555c554",null)),_t=ft.exports,yt=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"welcome"},[e("div",{staticClass:"nodata"},[e("img",{attrs:{src:"/static/img/draw_nodata.png"}}),e("p",{staticClass:"tips"},[t._v(t._s(t.desc))])])])},bt=[],Ct={props:{desc:{type:String,default:""}}},wt=Ct,xt=(e("c5f6"),Object(x["a"])(wt,yt,bt,!1,null,"f7a164d6",null)),St=xt.exports,kt=e("b140"),Ot={name:"Video",components:{videoPika:$,videoRunway:B,videoStable:U,videoSora:Y,videoItem:ut,welcome:St,videoDetail:_t,pages:kt["a"]},data:function(){return{activePlatform:"pika",listType:"public",publicList:[],publicPage:1,publicPageSize:30,publicTotalCount:0,myList:[],page:1,pagesize:10,activeVideo:null,hoverVideoId:null,pikaSetting:{},runwaySetting:{},stableSetting:{},soraSetting:{},user_balance_video:0,is_share:!0}},computed:Object(o["a"])(Object(o["a"])({},Object(n["b"])(["user_id","avatar","priceSetting"])),{},{userAvatar:function(){return this.avatar||"/static/img/ic_user.png"},aiAvatar:function(){return"/static/img/ic_ai.png"},publicPageTotal:function(){return Math.ceil(this.publicTotalCount/this.publicPageSize)},videoShopIsOpen:function(){return"pika"===this.activePlatform?!!this.pikaSetting["shop_open"]:"runway"===this.activePlatform?!!this.runwaySetting["shop_open"]:"stable"===this.activePlatform?!!this.stableSetting["shop_open"]:"sora"===this.activePlatform&&!!this.soraSetting["shop_open"]},showEditBtn:function(){return"pika"===this.activePlatform},showExtendBtn:function(){return"pika"===this.activePlatform}}),created:function(){var t=Object(c["b"])("videoListType");t&&(this.listType=t),this.getVideoSetting()},methods:{switchPlatform:function(t){this.activePlatform=t,this.publicPage=1,this.publicTotalCount=0,this.publicList=[],this.videoShopIsOpen?this.getPublicList():this.switchListType("my"),this.getHistoryMsg()},switchListType:function(t){this.listType=t,Object(c["g"])("videoListType",t)},getVideoSetting:function(){var t=this;p().then((function(i){t.pikaSetting=i.data.pika,t.runwaySetting=i.data.runway,t.stableSetting=i.data.stable,t.soraSetting=i.data.sora,t.pikaSetting["is_open"]?t.switchPlatform("pika"):t.runwaySetting["is_open"]?t.switchPlatform("runway"):t.stableSetting["is_open"]?t.switchPlatform("stable"):t.soraSetting["is_open"]&&t.switchPlatform("sora")})).catch((function(i){-1!==i.message.indexOf("已停用")&&setTimeout((function(){t.$router.push({name:"chat"})}),500)}))},submitTask:function(){var t=this,i=this.getVideoOptions();i.prompt?r({platform:this.activePlatform,options:JSON.stringify(i)}).then((function(e){t.switchListType("my"),t.myList.push({state:0,video_id:e.data.video_id,action:i.action,prompt:e.data.prompt,seed:e.data.seed?e.data.seed:"",create_time:e.data.create_time,platform:t.activePlatform}),t.clearOptions(),setTimeout((function(){t.startLoopResult(e.data.video_id)}),2e4),setTimeout((function(){t.scrollBottom()}),500)})).catch((function(i){403===i.errno?t.$modals.showLogin():-1!==i.message.indexOf("充值")&&(t.showPay(),setTimeout((function(){t.$message.error(i.message)}),500))})):this.$message.error("请输入视频描述")},startLoopResult:function(t){var i=this;setTimeout((function(){v({video_id:t}).then((function(e){var s=e.data.state;if(-1!==s)if(0!==s){if(1===s||2===s){var a=i.myList;a.forEach((function(i,o){i.video_id===t&&(a[o].state=s,1===s?(a[o].video=e.data.video,a[o].poster=e.data.poster,a[o].seed=e.data.seed):2===s&&(a[o].errmsg=e.data.message))})),i.myList=a}}else i.startLoopResult(t)})).catch((function(){i.startLoopResult(t)}))}),1e4)},retryVideo:function(t){var i=this;r({video_id:t}).then((function(e){var s=i.myList;s.forEach((function(e,a){e.video_id===t&&(s[a].state=0,s[a].errmsg="",s[a].video="",setTimeout((function(){i.startLoopResult(t)}),2e4))})),i.myList=s}))},getHistoryMsg:function(){var t=this;u({platform:this.activePlatform,page:this.page,pagesize:this.pagesize}).then((function(i){if(i.data.length>0){var e=i.data;e&&e.forEach((function(i,e){0!==i.state&&3!==i.state||t.startLoopResult(i.video_id)})),t.myList=e}setTimeout((function(){t.scrollBottom()}),500)}))},getPublicList:function(){var t=this;m({page:this.publicPage,pagesize:this.publicPageSize,platform:this.activePlatform}).then((function(i){t.publicList=i.data.list,t.publicTotalCount=i.data.count,t.$nextTick((function(){if(t.$refs["publicList"]){var i=t.$refs["publicList"].wrap;setTimeout((function(){i.scrollTop=0}),200)}}))}))},changePublicPage:function(t){this.publicPage=t,this.getPublicList()},getVideoOptions:function(){var t={};return this.$refs.videoSetting&&(t=this.$refs.videoSetting.getVideoOptions()),t},clearOptions:function(){this.$refs.videoSetting&&this.$refs.videoSetting.clearVideoOptions()},scrollBottom:function(){var t=this;this.$nextTick((function(){if(t.$refs["myList"]){var i=t.$refs["myList"].wrap;setTimeout((function(){i.scrollTop=i.scrollHeight}),200)}}))},showPay:function(){this.priceSetting.video_vip?this.$modals.showPay("vip"):this.$modals.showPay("point")},showUserInfo:function(){this.$modals.showUserInfo()},download:function(t){lt.a.saveAs(t,"video.mp4")},showVideoDetail:function(t){this.activeVideo=t},closeVideoDetail:function(){this.activeVideo=null},setVideoOptions:function(t){this.$refs.videoSetting.setVideoOptions(t)},handleMyVideo:function(t,i){var e=this;this.closeVideoDetail(),d({type:"my",video_id:i}).then((function(s){var a=s.data.options;"upscale"!==t?("copy"===t?a.action="generate":"edit"===t?(a.action="edit",a.video=s.data.video_url_ori,a.image=""):"extend"===t&&(a.action="extend",a.video=s.data.video_url_ori,a.image=""),e.setVideoOptions(a)):e.upscaleVideo("my",i)})).catch((function(t){-1!==t.message.indexOf("请登录")&&e.$modals.showLogin()}))},handlePublicVideo:function(t,i){var e=this;this.closeVideoDetail(),d({type:"public",video_id:i}).then((function(s){var a=s.data.options;"upscale"!==t?("copy"===t?a.action="generate":"edit"===t?(a.action="edit",a.video=s.data.video_url_ori,a.image=""):"extend"===t&&(a.action="extend",a.video=s.data.video_url_ori,a.image=""),e.setVideoOptions(a)):e.upscaleVideo("public",i)})).catch((function(t){-1!==t.message.indexOf("请登录")&&e.$modals.showLogin()}))},upscaleVideo:function(t,i){var e=this;g({type:t,video_id:i}).then((function(t){e.switchListType("my"),e.myList.push({state:0,video_id:t.data.video_id,action:"upscale",prompt:t.data.prompt,seed:t.data.seed?t.data.seed:"",create_time:t.data.create_time,platform:e.activePlatform}),e.clearOptions(),setTimeout((function(){e.startLoopResult(t.data.video_id)}),2e4),setTimeout((function(){e.scrollBottom()}),500)})).catch((function(t){403===t.errno?e.$modals.showLogin():-1!==t.message.indexOf("充值")&&(e.showPay(),setTimeout((function(){e.$message.error(t.message)}),500))}))},videoMouseEnter:function(t){this.hoverVideoId&&this.videoMouseOut(this.hoverVideoId),this.hoverVideoId=t,document.getElementById("public_video_"+t).play()},videoMouseLeave:function(t){this.hoverVideoId===t&&(document.getElementById("public_video_"+t).currentTime=0,document.getElementById("public_video_"+t).pause(),this.hoverVideoId=null)}}},Pt=Ot,zt=Object(x["a"])(Pt,s,a,!1,null,null,null);i["default"]=zt.exports},bf25:function(t,i,e){"use strict";e("1c66")},c5f6:function(t,i,e){"use strict";e("8c50")},cd36:function(t,i,e){},e352:function(t,i,e){"use strict";e("ecd8")},ecd8:function(t,i,e){},f2ae:function(t,i,e){}}]);