(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-commission-share"],{"0c79":function(t,a,e){"use strict";e.r(a);var i=e("2b06"),n=e.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a["default"]=n.a},"2b06":function(t,a,e){"use strict";e("7a82"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("ac1f"),e("5319"),e("14d9"),e("5b81"),e("d3b7"),e("159b");var i=getApp(),n={data:function(){return{share:{},currentHaibao:0,currentText:"",siteroot:"",tabList:[],activeTab:"",activeTabIndex:0}},onLoad:function(){this.getShare(),this.setData({system:i.globalData.system,siteroot:i.globalData.siteroot.replace("/web.php","")})},onShow:function(){uni.setNavigationBarTitle({title:this.$lang("邀请好友")})},methods:{getShare:function(){var t=this;i.globalData.util.request({url:"/commission/getShare",data:{platform:"h5"}}).then((function(a){var e=a.data;t.setData({share:e,currentText:a.data.defaultText,currentHaibao:a.data.defaultHaibao});var i=[];e.haibaoArr&&e.haibaoArr.length>0&&(i.push({id:"haibao",title:"分享海报"}),t.setData({tabList:i,activeTab:"haibao"})),e.textArr&&e.textArr.length>0&&(i.push({id:"text",title:"分享文案"}),t.setData({tabList:i,activeTab:"haibao"==t.activeTab?"haibao":"text"}))}))},onTabChange:function(t){this.activeTab=t.id,this.activeTabIndex=t.index},copyText:function(){var t=this.currentText;if(!t)return!1;t+="<br>"+this.share.h5url,t=t.replaceAll("<br>","\n"),uni.setClipboardData({data:t,success:function(){i.globalData.util.message("复制成功")}})},nextText:function(){var t=this,a=this.currentText,e=this.share.textArr;if(!e||e.length<=1)return i.globalData.util.message("没有更多了"),!1;e.forEach((function(i,n){i.content==a&&(n===e.length-1?t.setData({currentText:e[0]["content"]}):t.setData({currentText:e[n+1]["content"]}))}))},swiperChange:function(t){this.setData({currentHaibao:t.detail.current})},saveToAlbum:function(){var t=this.share.haibaoArr,a=this.currentHaibao,e=t[a],n=this.share.qrcode,o="https://"+window.location.host+"/web.php/commission/makePoster?bg="+encodeURIComponent(e.bg)+"&qrcode="+encodeURIComponent(n)+"&hole_w="+e.hole_w+"&hole_h="+e.hole_h+"&hole_x="+e.hole_x+"&hole_y="+e.hole_y;i.globalData.util.message("请长按弹出的图片->保存到手机","error",(function(){uni.previewImage({urls:[o]})}))}}};a.default=n},"86d2":function(t,a,e){"use strict";e.r(a);var i=e("e87d"),n=e("0c79");for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(o);e("bd3b");var r=e("f0c5"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"097da2ae",null,!1,i["a"],void 0);a["default"]=s.exports},aa9b:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,".page[data-v-097da2ae]{position:absolute;width:100%;left:0;right:0;top:0;bottom:%?110?%;overflow:hidden}.tabs[data-v-097da2ae]{\n    /* position: absolute; */top:0;left:0;width:100%;height:%?88?%;padding-left:%?12?%;box-sizing:border-box;margin-top:%?30?%}.pannel[data-v-097da2ae]{width:%?690?%;margin:%?30?% auto 0 auto;background:hsla(0,0%,100%,.8);border-radius:%?20?%;padding:%?30?% %?30?% %?30?% %?30?%;box-sizing:border-box;overflow:hidden}.pannel .title[data-v-097da2ae]{width:100%;padding:0 0 %?30?% 0;font-size:%?28?%;font-weight:700}.pannel .textarea[data-v-097da2ae]{font-size:%?28?%;color:#1b1c1c;line-height:%?36?%;background:#f3f6f6;border-radius:%?20?%;padding:%?20?%;min-height:%?140?%;border:1px solid #04babe}.pannel .btn-group[data-v-097da2ae]{width:100%;height:%?64?%;margin:%?60?% 0 %?30?% 0;text-align:center}.pannel .btn-group uni-view[data-v-097da2ae]{display:inline-block}.pannel .btn-group .btn[data-v-097da2ae]{width:%?200?%;margin:0 auto;font-size:%?28?%;font-weight:500;text-align:center;height:%?80?%;line-height:%?80?%;border-radius:%?40?%;background:#04babe;color:#fff;border:1px solid #04babe;letter-spacing:1px}.pannel .btn-group .btn[data-v-097da2ae]:active{opacity:.8}.pannel .btn-group .btn-next[data-v-097da2ae]{margin-left:%?30?%;background:#fff;color:#04babe}.pannel .btn-group .btn-save[data-v-097da2ae]{width:%?400?%;font-weight:500;color:#fff;text-align:center}.poster-list[data-v-097da2ae]{width:100%;height:%?500?%;margin:%?20?% 0;overflow:hidden}.poster-list .item[data-v-097da2ae]{overflow:hidden}.poster[data-v-097da2ae]{width:100%;height:100%;position:relative;margin:0 auto;overflow:hidden}.poster uni-image[data-v-097da2ae]{position:absolute;width:100%;height:100%}.welcome[data-v-097da2ae]{margin-top:%?360?%;position:relative;height:%?660?%}.welcome .nodata[data-v-097da2ae]{width:%?600?%;margin:0 auto;text-align:center;display:flex;flex-direction:column;align-items:center}.welcome .nodata uni-image[data-v-097da2ae]{width:%?300?%;height:%?300?%}.welcome .nodata .tips[data-v-097da2ae]{width:100%;color:#8d9393;font-size:%?32?%;margin-top:%?40?%}",""]),t.exports=a},bd3b:function(t,a,e){"use strict";var i=e("e542"),n=e.n(i);n.a},e542:function(t,a,e){var i=e("aa9b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("30d24715",i,!0,{sourceMap:!1,shadowMode:!1})},e87d:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return i}));var i={uvTabs:e("fc75").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"page"},[t.tabList.length>1?e("uv-tabs",{staticClass:"tabs",attrs:{list:t.tabList,current:t.activeTabIndex,"key-name":"title","line-color":"#04BABE",activeStyle:{color:"#1b1b1b",fontWeight:"bold",fontSize:"15px"},inactiveStyle:{color:"#1b1c1c",fontSize:"14px"}},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onTabChange.apply(void 0,arguments)}}}):t._e(),"text"==t.activeTab?e("v-uni-view",{staticClass:"pannel"},[1===t.tabList.length?e("v-uni-view",{staticClass:"title"},[t._v(t._s(t._f("lang")("分享文案")))]):t._e(),e("v-uni-view",{staticClass:"textarea"},[e("v-uni-view",{domProps:{innerHTML:t._s(t.currentText+"<br>"+t.share.h5url)}})],1),e("v-uni-view",{staticClass:"btn-group"},[e("v-uni-view",{staticClass:"btn btn-copy",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copyText.apply(void 0,arguments)}}},[t._v(t._s(t._f("lang")("复制文案")))]),t.share.textArr.length>1?e("v-uni-view",{staticClass:"btn btn-next",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.nextText.apply(void 0,arguments)}}},[t._v(t._s(t._f("lang")("换一个")))]):t._e()],1)],1):t._e(),"haibao"==t.activeTab?e("v-uni-view",{staticClass:"pannel"},[1===t.tabList.length?e("v-uni-view",{staticClass:"title"},[t._v(t._s(t._f("lang")("我的海报")))]):t._e(),e("v-uni-swiper",{staticClass:"poster-list",attrs:{"indicator-dots":!0,current:t.currentHaibao,circular:!0,autoplay:!1,"previous-margin":"-10rpx","next-margin":"-10rpx"},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.swiperChange.apply(void 0,arguments)}}},t._l(t.share.haibaoArr,(function(a){return e("v-uni-swiper-item",{staticClass:"item"},[e("v-uni-view",{staticClass:"poster",style:"width: "+a.bg_w*a.scale+"rpx; height: "+a.bg_h*a.scale+"rpx;"},[e("v-uni-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a.bg}}),e("v-uni-image",{style:"left: "+a.hole_x*a.scale+"rpx; top: "+a.hole_y*a.scale+"rpx; width: "+a.hole_w*a.scale+"rpx; height:"+a.hole_h*a.scale+"rpx;",attrs:{src:t.share.qrcode}})],1)],1)})),1),e("v-uni-view",{staticClass:"btn-group",staticStyle:{"margin-top":"100rpx"}},[e("v-uni-view",{staticClass:"btn btn-save",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.saveToAlbum.apply(void 0,arguments)}}},[t._v(t._s(t._f("lang")("下载海报图片")))])],1)],1):t._e(),t.share.textArr&&0!==t.share.textArr.length||t.share.haibaoArr&&0!==t.share.haibaoArr.length?t._e():e("v-uni-view",{staticClass:"welcome"},[e("v-uni-view",{staticClass:"nodata"},[e("v-uni-image",{attrs:{mode:"widthFix",src:"/static/images/ic_nodata.png"}}),e("v-uni-view",{staticClass:"tips"},[t._v("暂无内容~")])],1)],1),e("v-uni-canvas",{staticStyle:{display:"block",height:"4000rpx",width:"4000rpx",position:"absolute",left:"-4000rpx",top:"-4000rpx"},attrs:{canvasId:"poster"}})],1)},o=[]}}]);